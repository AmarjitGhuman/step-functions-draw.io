/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/index.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/extend.ts":
/*!***********************!*\
  !*** ./src/extend.ts ***!
  \***********************/
/*! exports provided: setupMisc */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setupMisc\", function() { return setupMisc; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"./src/utils.ts\");\n\nconst mxGraphCreateEdge = mxGraph.prototype.createEdge;\nmxGraph.prototype.createEdge = function (parent, id, value, source, target, style) {\n    if (_utils__WEBPACK_IMPORTED_MODULE_0__[\"isAWSsf\"](source) && source.awssf.createDefaultEdge) {\n        return source.awssf.createDefaultEdge(source);\n    }\n    else {\n        return mxGraphCreateEdge.apply(this, arguments);\n    }\n};\nconst mxConnectionHandlerCreateEdgeState = mxConnectionHandler.prototype.createEdgeState;\nmxConnectionHandler.prototype.createEdgeState = function (me) {\n    var cell = this.previous.cell;\n    if (_utils__WEBPACK_IMPORTED_MODULE_0__[\"isAWSsf\"](cell) && cell.awssf.createDefaultEdge) {\n        var edge = cell.awssf.createDefaultEdge(cell);\n        if (!edge)\n            return null;\n        return new mxCellState(this.graph.view, edge, this.graph.getCellStyle(edge));\n    }\n    else {\n        return mxConnectionHandlerCreateEdgeState.apply(this, arguments);\n    }\n};\nconst mxConnectionHandlerInsertEdge = mxConnectionHandler.prototype.insertEdge;\nmxConnectionHandler.prototype.insertEdge = function (parent, id, value, source, target, style) {\n    var edge = null;\n    if (!_utils__WEBPACK_IMPORTED_MODULE_0__[\"isAWSsf\"](source)) {\n        return mxConnectionHandlerInsertEdge.apply(this, arguments);\n    }\n    if (_utils__WEBPACK_IMPORTED_MODULE_0__[\"isParallelChild\"](source) || _utils__WEBPACK_IMPORTED_MODULE_0__[\"isParallelChild\"](target)) {\n        if (source.parent != target.parent)\n            return null;\n    }\n    if ((source == target) && (_utils__WEBPACK_IMPORTED_MODULE_0__[\"isTask\"](source) || _utils__WEBPACK_IMPORTED_MODULE_0__[\"isParallel\"](source))) {\n        edge = RetryEdge.prototype.create();\n    }\n    else if (this.edgeState) {\n        edge = this.edgeState.cell;\n    }\n    else if (source.awssf && source.awssf.createDefaultEdge) {\n        edge = source.awssf.createDefaultEdge(source);\n    }\n    else {\n        return null; // cancel\n    }\n    if (edge != null) {\n        edge = this.graph.addEdge(edge, parent, source, target);\n        return edge;\n    }\n    else {\n        return null;\n    }\n};\nfunction setupGraphCreateHandler(ui) {\n    const origGraphCreateHander = ui.editor.graph.createHandler;\n    function awssfCreateHandler(state) {\n        if (state != null && (this.getSelectionCells().length == 1) && _utils__WEBPACK_IMPORTED_MODULE_0__[\"isAWSsf\"](state.cell) && state.cell.awssf.handler) {\n            return new state.cell.awssf.handler(state);\n        }\n        return origGraphCreateHander.apply(this, arguments);\n    }\n    ui.editor.graph.createHandler = awssfCreateHandler;\n}\nfunction setupCellAdded(ui) {\n    const mxGraphModelCellAdded = ui.editor.graph.getModel().cellAdded;\n    function awssfCellAdded(cell) {\n        if (!_utils__WEBPACK_IMPORTED_MODULE_0__[\"isAWSsf\"](cell)) {\n            return mxGraphModelCellAdded.apply(this, arguments);\n        }\n        var names = {};\n        for (const i in this.cells) {\n            const a = this.cells[i];\n            if (a.isVertex() && a.getAttribute(\"label\")) {\n                var _label = a.getAttribute(\"label\");\n                if (names[_label]) {\n                    names[_label].push(a);\n                }\n                else {\n                    names[_label] = [a];\n                }\n            }\n        }\n        var label = cell.getAttribute(\"label\");\n        if (cell.isVertex() && names[label]) {\n            if (!_utils__WEBPACK_IMPORTED_MODULE_0__[\"isStart\"](cell) && !_utils__WEBPACK_IMPORTED_MODULE_0__[\"isEnd\"](cell)) {\n                var index = 2;\n                var newLabel = label.replace(/(\\d*)$/, index);\n                while (names[newLabel]) {\n                    index++;\n                    newLabel = label.replace(/(\\d*)$/, index);\n                }\n                cell.setAttribute(\"label\", newLabel);\n            }\n        }\n        _utils__WEBPACK_IMPORTED_MODULE_0__[\"setupRoot\"]();\n        return mxGraphModelCellAdded.apply(this, arguments);\n    }\n    ui.editor.graph.getModel().cellAdded = awssfCellAdded;\n}\nfunction setupMisc(ui) {\n    setupGraphCreateHandler(ui);\n    setupCellAdded(ui);\n}\n\n\n//# sourceURL=webpack:///./src/extend.ts?");

/***/ }),

/***/ "./src/form/dialog.ts":
/*!****************************!*\
  !*** ./src/form/dialog.ts ***!
  \****************************/
/*! exports provided: awssfImportDialog, awssfDeployDialog, awssfExportDialog */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"awssfImportDialog\", function() { return awssfImportDialog; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"awssfDeployDialog\", function() { return awssfDeployDialog; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"awssfExportDialog\", function() { return awssfExportDialog; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"./src/utils.ts\");\n\nconst awssfImportDialog = function (editorUi, title) {\n    var graph = editorUi.editor.graph;\n    function recurseStates(states) {\n        var res = { hash: {}, list: [] };\n        var cell;\n        for (var name in states) {\n            var body = states[name];\n            if (body.Type === \"Pass\") {\n                cell = PassState.prototype.create(name, body);\n            }\n            else if (body.Type === \"Task\") {\n                cell = TaskState.prototype.create(name, body);\n            }\n            else if (body.Type === \"Choice\") {\n                cell = ChoiceState.prototype.create(name, body);\n            }\n            else if (body.Type === \"Wait\") {\n                cell = WaitState.prototype.create(name, body);\n            }\n            else if (body.Type === \"Succeed\") {\n                cell = SucceedState.prototype.create(name, body);\n            }\n            else if (body.Type === \"Fail\") {\n                cell = FailState.prototype.create(name, body);\n            }\n            else if (body.Type === \"Parallel\") {\n                cell = ParallelState.prototype.create(name, body);\n                for (const branch in body.Branches) {\n                    var _sub = recurseStates(body.Branches[branch].States);\n                    for (const _cell of _sub.list)\n                        cell.insert(_cell);\n                    Object.assign(res.hash, _sub.hash);\n                }\n            }\n            res.hash[name] = cell;\n            res.list.push(cell);\n        }\n        return res;\n    }\n    function recurseEdges(json, vertexes, sp, ep) {\n        var res = [];\n        var edge;\n        if (json.StartAt && sp) {\n            edge = StartAtEdge.prototype.create();\n            edge.source = sp;\n            edge.target = vertexes[json.StartAt];\n            res.push(edge);\n        }\n        for (var name in json.States) {\n            var body = json.States[name];\n            if (body.Default && vertexes[body.Default]) {\n                edge = DefaultEdge.prototype.create('Default', vertexes[name], vertexes[body.Default]);\n                res.push(edge);\n            }\n            if (body.Next && vertexes[body.Next]) {\n                edge = NextEdge.prototype.create('Next', vertexes[name], vertexes[body.Next]);\n                res.push(edge);\n            }\n            if (body.End || (body.Type && body.Type.match(/(Succeed|Fail)/))) {\n                if (ep) {\n                    edge = NextEdge.prototype.create('Next', vertexes[name], ep);\n                    res.push(edge);\n                }\n            }\n            if (body.Retry) {\n                for (const r in body.Retry) {\n                    edge = RetryEdge.prototype.create('Retry', vertexes[name], body.Retry[r], body.Retry.length - Number(r));\n                    res.push(edge);\n                }\n            }\n            if (body.Catch && body.Catch.length > 0) {\n                for (const i in body.Catch) {\n                    edge = CatchEdge.prototype.create('Catch', vertexes[name], vertexes[body.Catch[i].Next], body.Catch[i], body.Catch.length - Number(i));\n                    res.push(edge);\n                }\n            }\n            if (body.Choices && body.Choices.length > 0) {\n                for (const i in body.Choices) {\n                    edge = ChoiceEdge.prototype.create('Choice', vertexes[name], vertexes[body.Choices[i].Next], body.Choices[i], body.Choices.length - Number(i));\n                    res.push(edge);\n                }\n            }\n            if (body.Type === \"Parallel\") {\n                for (const branch of body.Branches) {\n                    var _sp = vertexes[name].getChildAt(0);\n                    var tmp = recurseEdges(branch, vertexes, _sp);\n                    tmp.map(v => vertexes[name].insert(v));\n                }\n            }\n        }\n        return res;\n    }\n    function parse(text) {\n        var json;\n        if (text[0] === '{') {\n            json = JSON.parse(text.trim());\n        }\n        else {\n            json = jsyaml.load(text.trim());\n        }\n        var root = graph.getModel().getRoot();\n        root.setAttribute(\"comment\", json.Comment || \"\");\n        root.setAttribute(\"timeout_seconds\", json.TimeoutSeconds || \"\");\n        root.setAttribute(\"version\", json.Version || \"\");\n        var res = recurseStates(json.States);\n        var inserted = res.list;\n        var vertexes = res.hash;\n        var sp = StartPoint.prototype.create();\n        inserted.unshift(sp);\n        var ep = EndPoint.prototype.create();\n        inserted.push(ep);\n        var tmp = recurseEdges(json, vertexes, sp, ep);\n        inserted.push(...tmp);\n        graph.getModel().beginUpdate();\n        try {\n            graph.addCells(inserted);\n            graph.fireEvent(new mxEventObject('cellsInserted', 'cells', inserted));\n        }\n        finally {\n            graph.getModel().endUpdate();\n        }\n        return inserted;\n    }\n    function executeLayout(cells) {\n        graph.setSelectionCells(cells);\n        graph.getModel().beginUpdate();\n        try {\n            var parallels = cells.filter(function (v) { return v.awssf.type === \"Parallel\"; });\n            var parallelLayout = new mxCompactTreeLayout(graph, false);\n            parallelLayout.edgeRouting = false;\n            parallelLayout.levelDistance = 30;\n            for (var p in parallels) {\n                parallelLayout.execute(parallels[p], parallels[p].getChildAt(0));\n            }\n            var layout = new mxHierarchicalLayout(graph, mxConstants.DIRECTION_NORTH);\n            layout.intraCellSpacing = 40;\n            layout.interRankCellSpacing = 40;\n            layout.interHierarchySpacing = 40;\n            layout.parallelEdgeSpacing = 10;\n            layout.execute(graph.getDefaultParent(), [cells[0]]);\n        }\n        finally {\n            // New API for animating graph layout results asynchronously\n            var morph = new mxMorphing(graph);\n            morph.addListener(mxEvent.DONE, mxUtils.bind(this, function () {\n                graph.getModel().endUpdate();\n            }));\n            morph.startAnimation();\n        }\n    }\n    var div = document.createElement('div');\n    var h3 = document.createElement('h2');\n    mxUtils.write(h3, title);\n    h3.style.marginTop = '0px';\n    h3.style.marginBottom = '24px';\n    div.appendChild(h3);\n    var span = document.createElement('span');\n    mxUtils.write(span, 'Paste statemachine definition JSON or YAML');\n    div.appendChild(span);\n    var form = new mxForm('properties');\n    form.table.style.width = '100%';\n    form.table.style.paddingRight = '20px';\n    var defaultValue = '';\n    var textarea = form.addTextarea('', defaultValue, 25);\n    textarea.style.width = '100%';\n    textarea.style.marginBottom = '16px';\n    div.appendChild(form.table);\n    var form2 = new mxForm('properties');\n    form2.table.style.width = '100%';\n    form2.table.style.paddingRight = '20px';\n    var colgroupName = document.createElement('colgroup');\n    colgroupName.width = '120';\n    form2.table.insertBefore(colgroupName, form2.body);\n    var colgroupValue = document.createElement('colgroup');\n    form2.table.insertBefore(colgroupValue, form2.body);\n    var select = document.createElement('select');\n    form2.addField('StateMachine:', select);\n    if (_utils__WEBPACK_IMPORTED_MODULE_0__[\"inCarlo\"]() && _utils__WEBPACK_IMPORTED_MODULE_0__[\"setupAWSconfig\"]()) {\n        __listStateMachines().then(function (data) {\n            for (var j in data.stateMachines) {\n                var option = document.createElement('option');\n                mxUtils.writeln(option, data.stateMachines[j].name);\n                option.setAttribute('value', data.stateMachines[j].stateMachineArn);\n                select.appendChild(option);\n            }\n        });\n        mxEvent.addListener(select, 'change', function () {\n            __describeStateMachine(select.value).then(function (newData) {\n                if (textarea.value.length == 0 || textarea.value == defaultValue) {\n                    defaultValue = newData.definition;\n                    textarea.value = defaultValue;\n                }\n            });\n        });\n    }\n    else {\n        var option = document.createElement('option');\n        mxUtils.writeln(option, 'Select a StateMachine...');\n        select.appendChild(option);\n        select.disabled = true;\n    }\n    div.appendChild(form2.table);\n    var buttons = document.createElement('div');\n    buttons.style.marginTop = '18px';\n    buttons.style.textAlign = 'right';\n    this.init = function () {\n        textarea.focus();\n    };\n    var cancelBtn = mxUtils.button(mxResources.get('cancel'), function () {\n        if (textarea.value == defaultValue) {\n            editorUi.hideDialog();\n        }\n        else {\n            editorUi.confirm(mxResources.get('areYouSure'), function () {\n                editorUi.hideDialog();\n            });\n        }\n    });\n    cancelBtn.className = 'geBtn';\n    if (editorUi.editor.cancelFirst) {\n        buttons.appendChild(cancelBtn);\n    }\n    var okBtn = mxUtils.button(mxResources.get('awssfImportBtn'), function () {\n        try {\n            var cells = parse(textarea.value);\n            editorUi.hideDialog();\n            executeLayout(cells);\n        }\n        catch (err) {\n            alert(err);\n        }\n    });\n    buttons.appendChild(okBtn);\n    okBtn.className = 'geBtn gePrimaryBtn';\n    if (!editorUi.editor.cancelFirst) {\n        buttons.appendChild(cancelBtn);\n    }\n    div.appendChild(buttons);\n    this.container = div;\n};\nconst awssfDeployDialog = function (editorUi, title) {\n    var graph = editorUi.editor.graph;\n    var params = {\n        definition: JSON.stringify(_utils__WEBPACK_IMPORTED_MODULE_0__[\"getStepFunctionDefinition\"](), null, \"  \"),\n        name: graph.getModel().cells[0].getAttribute(\"name\") || \"\",\n        roleArn: graph.getModel().cells[0].getAttribute(\"role_arn\") || \"\",\n        stateMachineArn: graph.getModel().cells[0].getAttribute(\"state_machine_arn\") || \"\"\n    };\n    var div = document.createElement('div');\n    var h3 = document.createElement('h2');\n    mxUtils.write(h3, title);\n    h3.style.marginTop = '0px';\n    h3.style.marginBottom = '24px';\n    div.appendChild(h3);\n    var form = new mxForm('properties');\n    form.table.style.width = '100%';\n    form.table.style.paddingRight = '20px';\n    var colgroupName = document.createElement('colgroup');\n    colgroupName.width = '120';\n    form.table.insertBefore(colgroupName, form.body);\n    var colgroupValue = document.createElement('colgroup');\n    form.table.insertBefore(colgroupValue, form.body);\n    var select = document.createElement('select');\n    var defaultOption = document.createElement('option');\n    mxUtils.writeln(defaultOption, 'Create a new statemachine');\n    defaultOption.setAttribute('selected', 'true');\n    select.appendChild(defaultOption);\n    defaultOption.setAttribute('value', '__CREATE__');\n    __listStateMachines().then(function (data) {\n        for (var j in data.stateMachines) {\n            var option = document.createElement('option');\n            mxUtils.writeln(option, data.stateMachines[j].name);\n            option.setAttribute('value', data.stateMachines[j].stateMachineArn);\n            if (params.stateMachineArn == data.stateMachines[j].stateMachineArn) {\n                option.setAttribute('selected', 'true');\n            }\n            select.appendChild(option);\n        }\n    });\n    form.addField('StateMachine:', select);\n    mxEvent.addListener(select, 'change', function () {\n        __describeStateMachine(select.value).then(function (data) {\n            if (textarea.value.length == 0 || textarea.value == defaultValue) {\n                arnInput.value = data.stateMachineArn;\n                nameInput.value = data.name;\n                roleInput.value = data.roleArn;\n            }\n        });\n    });\n    var arnInput = form.addText('StaeMachineArn:', params.stateMachineArn);\n    arnInput.style.width = '100%';\n    var nameInput = form.addText('Name:', params.name);\n    nameInput.style.width = '100%';\n    var roleInput = form.addText('Role:', params.roleArn);\n    roleInput.style.width = '100%';\n    var defaultValue = params.definition;\n    var textarea = form.addTextarea('Definition:', defaultValue, 30);\n    textarea.style.width = '100%';\n    div.appendChild(form.table);\n    var buttons = document.createElement('div');\n    buttons.style.marginTop = '18px';\n    buttons.style.textAlign = 'right';\n    this.init = function () {\n        nameInput.focus();\n    };\n    var cancelBtn = mxUtils.button(mxResources.get('cancel'), function () {\n        if (textarea.value == defaultValue) {\n            editorUi.hideDialog();\n        }\n        else {\n            editorUi.confirm(mxResources.get('areYouSure'), function () {\n                editorUi.hideDialog();\n            });\n        }\n    });\n    cancelBtn.className = 'geBtn';\n    if (editorUi.editor.cancelFirst) {\n        buttons.appendChild(cancelBtn);\n    }\n    var okBtn = mxUtils.button(mxResources.get('awssfDeployBtn'), function () {\n        var params = {\n            name: nameInput.value,\n            definition: textarea.value,\n            roleArn: roleInput.value\n        };\n        if (select.value !== '__CREATE__') {\n            //@ts-ignore\n            params.stateMachineArn = arnInput.value;\n            delete params.name;\n            if (!params.roleArn)\n                delete params.roleArn;\n            if (!params.definition)\n                delete params.definition;\n        }\n        __deployStateMachine(params).then(() => {\n            editorUi.hideDialog();\n        }).catch(err => {\n            alert(err.message);\n        });\n    });\n    buttons.appendChild(okBtn);\n    okBtn.className = 'geBtn gePrimaryBtn';\n    if (!editorUi.editor.cancelFirst) {\n        buttons.appendChild(cancelBtn);\n    }\n    div.appendChild(buttons);\n    this.container = div;\n};\nconst awssfExportDialog = function (editorUi, title, value) {\n    var div = document.createElement('div');\n    var h3 = document.createElement('h2');\n    mxUtils.write(h3, title);\n    h3.style.marginTop = '0px';\n    h3.style.marginBottom = '24px';\n    div.appendChild(h3);\n    var form = new mxForm('properties');\n    form.table.style.width = '100%';\n    form.table.style.paddingRight = '20px';\n    var textarea = form.addTextarea('', value, 25);\n    textarea.style.width = '100%';\n    textarea.style.marginBottom = '16px';\n    textarea.readOnly = true;\n    div.appendChild(form.table);\n    var buttons = document.createElement('div');\n    buttons.style.marginTop = '18px';\n    buttons.style.textAlign = 'right';\n    this.init = function () {\n        textarea.focus();\n        textarea.scrollTop = 0;\n    };\n    var copyBtn = mxUtils.button(mxResources.get('copy'), function () {\n        const range = document.createRange();\n        range.selectNode(textarea);\n        const selection = document.getSelection();\n        selection.removeAllRanges();\n        selection.addRange(range);\n        document.execCommand('copy');\n        range.detach();\n    });\n    copyBtn.className = 'geBtn gePrimaryBtn';\n    buttons.appendChild(copyBtn);\n    var cancelBtn = mxUtils.button(mxResources.get('close'), function () {\n        editorUi.hideDialog();\n    });\n    cancelBtn.className = 'geBtn';\n    buttons.appendChild(cancelBtn);\n    div.appendChild(buttons);\n    this.container = div;\n};\n\n\n//# sourceURL=webpack:///./src/form/dialog.ts?");

/***/ }),

/***/ "./src/form/editData.ts":
/*!******************************!*\
  !*** ./src/form/editData.ts ***!
  \******************************/
/*! exports provided: setupEditData */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setupEditData\", function() { return setupEditData; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"./src/utils.ts\");\n\nfunction setupEditData() {\n    const origEditDataDialog = EditDataDialog;\n    EditDataDialog = function (editorUi, cell) {\n        if (!_utils__WEBPACK_IMPORTED_MODULE_0__[\"isAWSsf\"](cell)) {\n            return origEditDataDialog.apply(this, arguments);\n        }\n        var div = document.createElement('div');\n        var graph = editorUi.editor ? editorUi.editor.graph : editorUi.graph;\n        div.style.height = '100%'; //'310px';\n        div.style.overflow = 'auto';\n        var value = graph.getModel().getValue(cell);\n        // Converts the value to an XML node\n        if (!mxUtils.isNode(value)) {\n            var obj = mxUtils.createXmlDocument().createElement('object');\n            obj.setAttribute('label', value || '');\n            value = obj;\n        }\n        // Creates the dialog contents\n        var form = new mxForm('properties');\n        form.table.style.width = '100%';\n        form.table.style.paddingRight = '20px';\n        var colgroupName = document.createElement('colgroup');\n        colgroupName.width = '120';\n        form.table.insertBefore(colgroupName, form.body);\n        var colgroupValue = document.createElement('colgroup');\n        form.table.insertBefore(colgroupValue, form.body);\n        var attrs = value.attributes;\n        var names = [];\n        var texts = [];\n        var count = 0;\n        var addTextArea = function (index, name, value) {\n            names[index] = name;\n            texts[index] = form.addTextarea(names[count] + ':', value, 2);\n            texts[index].style.width = '100%';\n            return texts[index];\n        };\n        var addText = function (index, name, value) {\n            names[index] = name;\n            texts[index] = form.addText(names[count] + ':', value);\n            texts[index].style.width = '100%';\n            return texts[index];\n        };\n        for (var i = 0; i < attrs.length; i++) {\n            var nodeName = attrs[i].nodeName;\n            var nodeValue = attrs[i].nodeValue;\n            if (cell.awssf.hiddenAttributes && cell.awssf.hiddenAttributes.indexOf(nodeName) >= 0)\n                continue;\n            if (nodeName == 'type') {\n                var span = document.createElement('span');\n                mxUtils.write(span, nodeValue);\n                form.addField('type:', span);\n            }\n            else if ((typeof (AWS) === \"object\") && (nodeName == 'resource')) {\n                const input = addText(count, nodeName, nodeValue);\n                count++;\n                input.setAttribute(\"list\", \"resources\");\n                const datalist = document.createElement('datalist');\n                datalist.id = \"resources\";\n                _utils__WEBPACK_IMPORTED_MODULE_0__[\"getResourceList\"](function (resources) {\n                    for (var j in resources) {\n                        var opt = document.createElement('option');\n                        opt.value = resources[j];\n                        datalist.appendChild(opt);\n                    }\n                });\n                div.appendChild(datalist);\n            }\n            else if (nodeName == 'label' && (_utils__WEBPACK_IMPORTED_MODULE_0__[\"isChoice\"](cell) || _utils__WEBPACK_IMPORTED_MODULE_0__[\"isRetry\"](cell) || _utils__WEBPACK_IMPORTED_MODULE_0__[\"isCatch\"](cell))) {\n                const input = addText(count, nodeName, nodeValue);\n                count++;\n                input.setAttribute(\"list\", \"candidates\");\n                const datalist = document.createElement('datalist');\n                datalist.id = \"candidates\";\n                var candidates = [];\n                if (attrs[\"error_equals\"])\n                    candidates.push(\"%error_equals%\");\n                if (attrs[\"condition\"])\n                    candidates.push(\"%condition%\");\n                for (var j in candidates) {\n                    var opt = document.createElement('option');\n                    opt.value = candidates[j];\n                    datalist.appendChild(opt);\n                }\n                div.appendChild(datalist);\n            }\n            else if (nodeName == 'error_equals') {\n                const input = addText(count, nodeName, nodeValue);\n                count++;\n                input.setAttribute(\"list\", \"errors\");\n                const datalist = document.createElement('datalist');\n                datalist.id = \"errors\";\n                var errors = [\n                    \"States.ALL\", \"States.Timeout\", \"States.TaskFailed\", \"States.Permissions\",\n                    \"States.ResultPathMatchFailure\", \"States.BranchFailed\", \"States.NoChoiceMatched\"\n                ];\n                for (const error of errors) {\n                    const opt = document.createElement('option');\n                    opt.value = error;\n                    datalist.appendChild(opt);\n                }\n                div.appendChild(datalist);\n            }\n            else if (cell.awssf && cell.awssf.buildForm) {\n                const res = cell.awssf.buildForm(form, nodeName, nodeValue);\n                if (res != null) {\n                    names[count] = res[0];\n                    texts[count] = res[1];\n                    count++;\n                }\n            }\n            else if ( /*nodeName != 'label' && */nodeName != 'placeholders') {\n                addTextArea(count, nodeName, nodeValue);\n                count++;\n            }\n        }\n        div.appendChild(form.table);\n        this.init = function () {\n            if (texts.length > 0) {\n                texts[0].focus();\n                // } else {\n                //   nameInput.focus();\n            }\n        };\n        var cancelBtn = mxUtils.button(mxResources.get('cancel'), function () {\n            editorUi.hideDialog.apply(editorUi, arguments);\n        });\n        cancelBtn.className = 'geBtn';\n        var applyBtn = mxUtils.button(mxResources.get('apply'), function () {\n            try {\n                editorUi.hideDialog.apply(editorUi, arguments);\n                // Clones and updates the value\n                value = value.cloneNode(true);\n                var removeLabel = false;\n                for (var i = 0; i < names.length; i++) {\n                    if (cell.awssf && cell.awssf.applyForm) {\n                        removeLabel = removeLabel || cell.awssf.applyForm(value, names[i], texts[i]);\n                    }\n                    else {\n                        if (texts[i] == null) {\n                            value.removeAttribute(names[i]);\n                        }\n                        else {\n                            value.setAttribute(names[i], texts[i].value);\n                            removeLabel = removeLabel || (names[i] == 'placeholder' &&\n                                value.getAttribute('placeholders') == '1');\n                        }\n                    }\n                }\n                // Removes label if placeholder is assigned\n                if (removeLabel) {\n                    value.removeAttribute('label');\n                }\n                // Updates the value of the cell (undoable)\n                graph.getModel().setValue(cell, value);\n            }\n            catch (e) {\n                mxUtils.alert(e);\n            }\n        });\n        applyBtn.className = 'geBtn gePrimaryBtn';\n        var buttons = document.createElement('div');\n        buttons.style.marginTop = '18px';\n        buttons.style.textAlign = 'right';\n        if (graph.getModel().isVertex(cell) || graph.getModel().isEdge(cell)) {\n            var replace = document.createElement('span');\n            replace.style.marginRight = '10px';\n            var input = document.createElement('input');\n            input.setAttribute('type', 'checkbox');\n            input.style.marginRight = '6px';\n            if (value.getAttribute('placeholders') == '1') {\n                input.setAttribute('checked', 'checked');\n                input.defaultChecked = true;\n            }\n            mxEvent.addListener(input, 'click', function () {\n                if (value.getAttribute('placeholders') == '1') {\n                    value.removeAttribute('placeholders');\n                }\n                else {\n                    value.setAttribute('placeholders', '1');\n                }\n            });\n            replace.appendChild(input);\n            mxUtils.write(replace, mxResources.get('placeholders'));\n            if (EditDataDialog.placeholderHelpLink != null) {\n                var link = document.createElement('a');\n                link.setAttribute('href', EditDataDialog.placeholderHelpLink);\n                link.setAttribute('title', mxResources.get('help'));\n                link.setAttribute('target', '_blank');\n                link.style.marginLeft = '10px';\n                link.style.cursor = 'help';\n                var icon = document.createElement('img');\n                icon.setAttribute('border', '0');\n                icon.setAttribute('valign', 'middle');\n                icon.style.marginTop = '-4px';\n                icon.setAttribute('src', Editor.helpImage);\n                link.appendChild(icon);\n                replace.appendChild(link);\n            }\n            buttons.appendChild(replace);\n        }\n        if (editorUi.editor && editorUi.editor.cancelFirst) {\n            buttons.appendChild(cancelBtn);\n            buttons.appendChild(applyBtn);\n        }\n        else {\n            buttons.appendChild(applyBtn);\n            buttons.appendChild(cancelBtn);\n        }\n        div.appendChild(buttons);\n        this.container = div;\n    };\n}\n\n\n//# sourceURL=webpack:///./src/form/editData.ts?");

/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _main__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./main */ \"./src/main.ts\");\nmxscript(\"https://cdn.rawgit.com/soney/jsep/b8baab7b/build/jsep.min.js\");\nmxscript(\"https://cdn.rawgit.com/nodeca/js-yaml/9c1894e2/dist/js-yaml.min.js\");\nmxscript(\"https://sdk.amazonaws.com/js/aws-sdk-2.510.0.min.js\");\n// mxscript(\"https://rawgit.com/soney/jsep/master/build/jsep.min.js\");\n// mxscript(\"https://f248fda6.ngrok.io/aws-sdk-2.510.0.js\");\n// mxscript(\"https://localhost:8000/js/jsep.min.js\");\n\nDraw.loadPlugin(_main__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n\n//# sourceURL=webpack:///./src/index.ts?");

/***/ }),

/***/ "./src/main.ts":
/*!*********************!*\
  !*** ./src/main.ts ***!
  \*********************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return main; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"./src/utils.ts\");\n/* harmony import */ var _form_editData__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./form/editData */ \"./src/form/editData.ts\");\n/* harmony import */ var _menu__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./menu */ \"./src/menu.ts\");\n/* harmony import */ var _sidebar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./sidebar */ \"./src/sidebar.ts\");\n/* harmony import */ var _patch__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./patch */ \"./src/patch.ts\");\n/* harmony import */ var _extend__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./extend */ \"./src/extend.ts\");\n/* harmony import */ var _states_index__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./states/index */ \"./src/states/index.ts\");\n\n\n\n\n\n\n\nfunction main(ui) {\n    _utils__WEBPACK_IMPORTED_MODULE_0__[\"init\"](ui);\n    Object(_form_editData__WEBPACK_IMPORTED_MODULE_1__[\"setupEditData\"])();\n    Object(_states_index__WEBPACK_IMPORTED_MODULE_6__[\"setupStates\"])(ui);\n    Object(_sidebar__WEBPACK_IMPORTED_MODULE_3__[\"setupSidebar\"])(ui);\n    Object(_menu__WEBPACK_IMPORTED_MODULE_2__[\"setupActions\"])(ui);\n    Object(_patch__WEBPACK_IMPORTED_MODULE_4__[\"refreshScratchpadData\"])(ui);\n    Object(_extend__WEBPACK_IMPORTED_MODULE_5__[\"setupMisc\"])(ui);\n}\n\n\n//# sourceURL=webpack:///./src/main.ts?");

/***/ }),

/***/ "./src/menu.ts":
/*!*********************!*\
  !*** ./src/menu.ts ***!
  \*********************/
/*! exports provided: setupActions */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setupActions\", function() { return setupActions; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"./src/utils.ts\");\n/* harmony import */ var _form_dialog__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./form/dialog */ \"./src/form/dialog.ts\");\n\n\nlet ui;\nfunction editData() {\n    var cell = ui.editor.graph.getSelectionCell() || ui.editor.graph.getModel().getRoot();\n    if (cell != null) {\n        var dlg = new EditDataDialog(ui, cell);\n        ui.showDialog(dlg.container, 600, 320, true, false);\n        dlg.container.parentNode.style.resize = 'both';\n        dlg.init();\n    }\n}\nfunction popup(title, src) {\n    var dlg = new _form_dialog__WEBPACK_IMPORTED_MODULE_1__[\"awssfExportDialog\"](ui, title, src);\n    ui.showDialog(dlg.container, 700, 500, true, false);\n    dlg.container.parentNode.style.resize = 'both';\n    dlg.init();\n}\nfunction validate() {\n    var checklist = {\n        START_EXIST: [false, 'start MUST exist'],\n        END_EXIST: [false, 'end MUST exist'],\n        UNIQ_NAME: [true, {}, 'name MUST be unique.'],\n        NAME_LENGTH: [true, [], 'name MUST BE less than or equal to 128 unicode characters.']\n    };\n    var model = ui.editor.graph.getModel();\n    for (const i in model.cells) {\n        const cell = model.cells[i];\n        if (cell.awssf && cell.awssf.validate) {\n            var res = cell.awssf.validate(cell);\n            if (res.length > 0) {\n                checklist[label] = [false, [], res.join(\"\\n\")];\n                ui.editor.graph.setCellWarning(cell, res.join(\"\\n\"));\n            }\n            else {\n                ui.editor.graph.setCellWarning(cell, null);\n            }\n        }\n        if (!cell.isVertex())\n            continue;\n        var label = cell.getAttribute(\"label\");\n        if (label != null && !_utils__WEBPACK_IMPORTED_MODULE_0__[\"isStart\"](cell) && !_utils__WEBPACK_IMPORTED_MODULE_0__[\"isEnd\"](cell)) {\n            if (checklist.UNIQ_NAME[1][label] >= 1) {\n                checklist.UNIQ_NAME[0] = false;\n                checklist.UNIQ_NAME[1][label] += 1;\n            }\n            else {\n                checklist.UNIQ_NAME[1][label] = 1;\n            }\n            if (label.length > 128) {\n                checklist.NAME_LENGTH[0] = false;\n                //@ts-ignore\n                checklist.NAME_LENGTH[1].push(label);\n            }\n        }\n        if (cell.value != null) {\n            if (_utils__WEBPACK_IMPORTED_MODULE_0__[\"isStart\"](cell)) {\n                checklist.START_EXIST[0] = true;\n            }\n            if (_utils__WEBPACK_IMPORTED_MODULE_0__[\"isEnd\"](cell)) {\n                checklist.END_EXIST[0] = true;\n            }\n        }\n    }\n    var msg = [];\n    for (const i in checklist) {\n        if (checklist[i][0] == false) {\n            msg.push(checklist[i][checklist[i].length - 1]);\n        }\n    }\n    if (msg.length > 0)\n        mxUtils.alert(msg.join(\"\\n\"));\n}\nfunction exportJson() {\n    var data = _utils__WEBPACK_IMPORTED_MODULE_0__[\"getStepFunctionDefinition\"]();\n    popup(\"Export as JSON\", JSON.stringify(data, null, \"  \"));\n}\nfunction exportYaml() {\n    var data = _utils__WEBPACK_IMPORTED_MODULE_0__[\"getStepFunctionDefinition\"]();\n    popup(\"Export as YAML\", jsyaml.dump(data));\n}\nfunction exportXml() {\n    var encoder = new mxCodec();\n    var node = encoder.encode(ui.editor.graph.getModel());\n    popup(\"Export as XML for draw.io\", mxUtils.getPrettyXml(node));\n}\nfunction importDefinition() {\n    var dlg = new _form_dialog__WEBPACK_IMPORTED_MODULE_1__[\"awssfImportDialog\"](ui, 'Import Definition');\n    ui.showDialog(dlg.container, 700, 500, true, false);\n    dlg.container.parentNode.style.resize = 'both';\n    dlg.init();\n}\nfunction deploy() {\n    if (!(_utils__WEBPACK_IMPORTED_MODULE_0__[\"inCarlo\"]() && _utils__WEBPACK_IMPORTED_MODULE_0__[\"setupAWSconfig\"]()))\n        return;\n    var dlg = new _form_dialog__WEBPACK_IMPORTED_MODULE_1__[\"awssfDeployDialog\"](ui, 'Deploy StateMachine Definition');\n    ui.showDialog(dlg.container, 800, 600, true, false);\n    dlg.container.parentNode.style.resize = 'both';\n    dlg.init();\n}\nfunction setupActions(editorUi) {\n    ui = editorUi;\n    mxResources.parse('stepFunctions=StepFunctions');\n    mxResources.parse('awssfValidate=Validate');\n    mxResources.parse('awssfImport=Import...');\n    mxResources.parse('awssfImportBtn=Import');\n    mxResources.parse('awssfExportJSON=Export JSON');\n    mxResources.parse('awssfExportYAML=Export YAML');\n    mxResources.parse('awssfExport=Export');\n    mxResources.parse('awssfLambda=Lambda');\n    mxResources.parse('awssfDeploy=Deploy...');\n    mxResources.parse('awssfDeployBtn=Deploy');\n    editorUi.actions.addAction('editData...', editData, null, null, 'Ctrl+M');\n    editorUi.actions.addAction('awssfValidate', validate);\n    editorUi.actions.addAction('awssfExportJSON', exportJson);\n    editorUi.actions.addAction('awssfExportYAML', exportYaml);\n    editorUi.actions.addAction('awssfExport', exportXml);\n    editorUi.actions.addAction('awssfImport', importDefinition);\n    editorUi.actions.addAction('awssfDeploy', deploy).isEnabled = _utils__WEBPACK_IMPORTED_MODULE_0__[\"isSupproted\"];\n    function setMenu(_menu, parent) {\n        editorUi.menus.addMenuItems(_menu, [\n            '-',\n            'awssfValidate',\n            '-',\n            'awssfImport',\n            'awssfExportJSON',\n            'awssfExportYAML',\n            'awssfExport',\n            '-',\n            'awssfDeploy'\n        ]);\n    }\n    var menu = editorUi.menubar.addMenu('StepFunctions', setMenu);\n    menu.parentNode.insertBefore(menu, menu.previousSibling.previousSibling.previousSibling);\n}\n\n\n//# sourceURL=webpack:///./src/menu.ts?");

/***/ }),

/***/ "./src/patch.ts":
/*!**********************!*\
  !*** ./src/patch.ts ***!
  \**********************/
/*! exports provided: refreshScratchpadData */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"refreshScratchpadData\", function() { return refreshScratchpadData; });\nfunction refreshScratchpadData(ui) {\n    var forceReloadScratchPad = function (...v) {\n        console.log(\">>reload scratchpad\", ...v);\n        ui.toggleScratchpad();\n        ui.toggleScratchpad();\n    };\n    ui.addListener('clientLoaded', forceReloadScratchPad);\n}\n\n\n//# sourceURL=webpack:///./src/patch.ts?");

/***/ }),

/***/ "./src/sidebar.ts":
/*!************************!*\
  !*** ./src/sidebar.ts ***!
  \************************/
/*! exports provided: setupSidebar */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setupSidebar\", function() { return setupSidebar; });\n// Avoids having to bind all functions to \"this\"\nfunction setupSidebar(editorUi) {\n    const sb = editorUi.sidebar;\n    function addPalette(content) {\n        const vertexes = [\n            AWSconfig,\n            StartPoint,\n            EndPoint,\n            TaskState,\n            PassState,\n            ChoiceState,\n            WaitState,\n            SucceedState,\n            FailState,\n            ParallelState\n        ];\n        for (const vertex of vertexes) {\n            const cell = vertex.prototype.create();\n            content.appendChild(sb.createVertexTemplateFromCells([cell], cell.geometry.width, cell.geometry.height, cell.label));\n        }\n    }\n    // Adds custom sidebar entry\n    sb.addPalette('awsStepFunctions', 'AWS Step Functions', true, addPalette);\n    // Collapses default sidebar entry and inserts this before\n    const c = sb.container;\n    c.firstChild.click();\n    c.insertBefore(c.lastChild, c.firstChild);\n    c.insertBefore(c.lastChild, c.firstChild);\n}\n\n\n//# sourceURL=webpack:///./src/sidebar.ts?");

/***/ }),

/***/ "./src/states/awsconfig.ts":
/*!*********************************!*\
  !*** ./src/states/awsconfig.ts ***!
  \*********************************/
/*! exports provided: AWSconfig */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AWSconfig\", function() { return AWSconfig; });\n/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helper */ \"./src/states/helper.ts\");\n\nfunction createAWSconfig(awsf) {\n    var cell = new mxCell('AWSconfig', new mxGeometry(0, 0, 70, 46), 'dashed=0;html=1;shape=mxgraph.aws2.non-service_specific.cloud;strokeColor=none;verticalLabelPosition=bottom;verticalAlign=top;');\n    cell.vertex = true;\n    cell.value = mxUtils.createXmlDocument().createElement('object');\n    cell.setAttribute('label', 'config');\n    cell.setAttribute('type', 'awssfAWSconfig');\n    cell.setAttribute('accessKeyId', '');\n    cell.setAttribute('secretAccessKey', '');\n    cell.setAttribute('region', '');\n    cell.awssf = awsf;\n    return cell;\n}\nconst AWSconfig = function () { };\nAWSconfig.prototype.create = function () {\n    return createAWSconfig(this);\n};\nAWSconfig.prototype.handler = _helper__WEBPACK_IMPORTED_MODULE_0__[\"awssfStateHandler\"];\nObject(_helper__WEBPACK_IMPORTED_MODULE_0__[\"registCodec\"])(AWSconfig);\n\n\n//# sourceURL=webpack:///./src/states/awsconfig.ts?");

/***/ }),

/***/ "./src/states/choice.ts":
/*!******************************!*\
  !*** ./src/states/choice.ts ***!
  \******************************/
/*! exports provided: ChoiceState */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ChoiceState\", function() { return ChoiceState; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"./src/utils.ts\");\n/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./helper */ \"./src/states/helper.ts\");\n\n\nconst ChoiceState = function () { };\nChoiceState.prototype.type = 'Choice';\nChoiceState.prototype.create = function (label, json) {\n    if (!json)\n        json = {};\n    var style = 'shape=stencil(rZZNT4QwEIZ/DddNodmgR8Pi0YsHzl12VpqFlrS46r+3UIl8FNOhJhzgHWaezvBSiGimK9ZClBDBGojoKUqSE5RccynMqdGZbqHsbOTOFGfnGmxEd0re4INfusqGuahA8a6P0jwiT+ae/qBZKYUwRUxNPYtM4qYY48Lkkk9bjBzio+V8/Qj2qjWIBjpQM/V39S9FMUjPCBIl+0ho0L6O0Jh0Xz85GvSwr6EcT1qYIfYjvYabwZsUaAZfTqgZfDnBZvAG4UkkXfjukBz9aAX6ZVqAfDn/0FPqy8J74jHZO8AcO8B43wDxplj35DvA3DVAmhll68NFszMrb29KvouLc4kt6z+Kq8AYbuQdJiNy7aKu1sf0motJunMT9k+Pydzjx0D+WA+xgtAC6AbKWmrYspfRV49vUDeeOc2uUsEfZrjyurY/S06TrbIH1f6XDcI3);whiteSpace=wrap;html=1;gradientColor=none;dashed=1';\n    var cell = Object(_helper__WEBPACK_IMPORTED_MODULE_1__[\"createState\"])(this, label, style, json);\n    cell.setAttribute('choices', '');\n    cell.setAttribute('default', '');\n    return cell;\n};\nChoiceState.prototype.hiddenAttributes = ['choices', 'default'];\nChoiceState.prototype.createDefaultEdge = function () {\n    return ChoiceEdge.prototype.create();\n};\nChoiceState.prototype.validate = function (cell, res) {\n    if (!res)\n        res = [];\n    if (!cell.edges ||\n        (cell.edges.filter(function (v) { return (v.source == cell) && _utils__WEBPACK_IMPORTED_MODULE_0__[\"isChoice\"](v); }).length == 0)) {\n        res.push(\"A Choice state MUST have more than one choice edge\");\n    }\n    return _utils__WEBPACK_IMPORTED_MODULE_0__[\"validateCommonAttributes\"](cell, res, false);\n};\nChoiceState.prototype.expJSON = function (cell, cells) {\n    var data = {};\n    var label = cell.getAttribute(\"label\");\n    data[label] = {\n        Type: \"Choice\",\n        Choices: []\n    };\n    if (cell.getAttribute(\"comment\"))\n        data[label].Comment = cell.getAttribute(\"comment\");\n    if (cell.getAttribute(\"input_path\"))\n        data[label].InputPath = _utils__WEBPACK_IMPORTED_MODULE_0__[\"adjustJsonPath\"](cell.getAttribute(\"input_path\"));\n    if (cell.getAttribute(\"output_path\"))\n        data[label].OutputPath = _utils__WEBPACK_IMPORTED_MODULE_0__[\"adjustJsonPath\"](cell.getAttribute(\"output_path\"));\n    if (cell.edges) {\n        var sortedEdges = cell.edges.sort(function (a, b) {\n            if (Number(a.getAttribute(\"weight\")) > Number(b.getAttribute(\"weight\")))\n                return -1;\n            if (Number(a.getAttribute(\"weight\")) < Number(b.getAttribute(\"weight\")))\n                return 1;\n            return 0;\n        });\n        for (var i in sortedEdges) {\n            var edge = sortedEdges[i];\n            if (edge.source != cell)\n                continue;\n            if (_utils__WEBPACK_IMPORTED_MODULE_0__[\"isChoice\"](edge)) {\n                data[label].Choices.push(edge.awssf.expJSON(edge, cells));\n            }\n            else if (_utils__WEBPACK_IMPORTED_MODULE_0__[\"isDefault\"](edge)) {\n                Object.assign(data[label], edge.awssf.expJSON(edge, cells));\n            }\n        }\n    }\n    return data;\n};\nObject(_helper__WEBPACK_IMPORTED_MODULE_1__[\"registCodec\"])(ChoiceState);\nvar ChoiceStateHandler = function (state) {\n    this.custom = function () {\n        this.domNode.appendChild(ChoiceEdge.prototype.createHandlerImage.apply(this, arguments));\n        this.domNode.appendChild(DefaultEdge.prototype.createHandlerImage.apply(this, arguments));\n    };\n    _helper__WEBPACK_IMPORTED_MODULE_1__[\"awssfStateHandler\"].apply(this, arguments);\n};\nChoiceState.prototype.handler = ChoiceStateHandler;\nmxUtils.extend(ChoiceStateHandler, _helper__WEBPACK_IMPORTED_MODULE_1__[\"awssfStateHandler\"]);\n\n\n//# sourceURL=webpack:///./src/states/choice.ts?");

/***/ }),

/***/ "./src/states/edge.ts":
/*!****************************!*\
  !*** ./src/states/edge.ts ***!
  \****************************/
/*! exports provided: StartAtEdge, NextEdge, RetryEdge, CatchEdge, ChoiceEdge, DefaultEdge */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"StartAtEdge\", function() { return StartAtEdge; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NextEdge\", function() { return NextEdge; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RetryEdge\", function() { return RetryEdge; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CatchEdge\", function() { return CatchEdge; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ChoiceEdge\", function() { return ChoiceEdge; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DefaultEdge\", function() { return DefaultEdge; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"./src/utils.ts\");\n/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./helper */ \"./src/states/helper.ts\");\n\n\nconst StartAtEdge = function () { };\nStartAtEdge.prototype.type = 'StartAt';\nStartAtEdge.prototype.create = function (label, source, target) {\n    if (label == null)\n        label = this.type;\n    var cell = Object(_helper__WEBPACK_IMPORTED_MODULE_1__[\"createEdge\"])(this, label, 'endArrow=classic;html=1;strokeColor=#000000;strokeWidth=1;fontSize=12;', source, target);\n    return cell;\n};\nStartAtEdge.prototype.validate = function (cell, res) {\n    if (!res)\n        res = [];\n    if (!(cell.source && cell.target)) {\n        res.push(\"edge MUST be connected\");\n    }\n    return res;\n};\nStartAtEdge.prototype.expJSON = function (cell, cells) {\n    if (cell.target != null) {\n        var data = {\n            StartAt: cells[cell.target.id].getAttribute(\"label\")\n        };\n        return data;\n    }\n    else {\n        return {};\n    }\n};\nStartAtEdge.prototype.handler = _helper__WEBPACK_IMPORTED_MODULE_1__[\"awssfEdgeHandler\"];\nObject(_helper__WEBPACK_IMPORTED_MODULE_1__[\"registCodec\"])(StartAtEdge);\nconst NextEdge = function () { };\nNextEdge.prototype.type = 'Next';\nNextEdge.prototype.create = function (label, source, target) {\n    if (label == null)\n        label = this.type;\n    var cell = Object(_helper__WEBPACK_IMPORTED_MODULE_1__[\"createEdge\"])(this, label, 'endArrow=classic;html=1;strokeColor=#000000;strokeWidth=1;fontSize=12;', source, target);\n    return cell;\n};\nNextEdge.prototype.validate = function (cell, res) {\n    if (!res)\n        res = [];\n    if (!(cell.source && cell.target)) {\n        res.push(\"edge MUST be connected\");\n    }\n    return res;\n};\nNextEdge.prototype.expJSON = function (cell, cells) {\n    if (cell.target != null) {\n        var data = {\n            Next: cells[cell.target.id].getAttribute(\"label\")\n        };\n        return data;\n    }\n    else {\n        return {};\n    }\n};\nNextEdge.prototype.createHandlerImage = function () {\n    var img = _utils__WEBPACK_IMPORTED_MODULE_0__[\"createHandlerImage\"].call(this, NextEdge, 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAXCAYAAADgKtSgAAAB30lEQVRIS72VsU4CQRRFj52ddCZU0tpo4h/YYKkUNhRCYgyJhfIFakNjoR9goiiJiY12kBBsaSDRL9A/EBtojJjLZNhlnIVdjU612Z097819d96bGw6HQ/5ozcWBv77C8zM8PcHqKqyswNLS7Iwi4b0elMvw8AB6dlcqBZubcHYGevYtL1zAYtEP9QW5vDSB3PUNXihAtTr7yO6OgwM4P598OwFXxltbycH2j/v7yROM4dI1kwmkWF+H62v4/ASd5vExCHpxAdvbsL8PNzfBe2n/8hLUYAx35bDwdBqaTchmZ8O1Y2cHrq7M3jFcUd/fA4CFDwagAKencHxsvkdlrm/ivL2F4PKxJAkvC2+1YG0NFhZgbw/q9elwMSSN7sEoc18hLbzRgG4XKhXodCCXM972ae4WdgTXcU9O/JkLvrsLtZpxkuy2uDgdfnRkJIyVueDLy3B3Z+Rpt2Fj47tbvJlP09xmrh9LJSPPxwfMz0fDJzS3Vfa5JQzXPt3efB76fT9cJ7O9aKbPXbjkub017nIvUaTPFU32CWeftBEoa0lsu+T/9Bab5U+7orVf+LSR/VxB4kgkKdRLYvVzG1k1ODw0k8gXRFABdakSTSK3kCqS5qedoZqjv5qhSZ3i2/8FknYly43Hp8kAAAAASUVORK5CYII=');\n    return img;\n};\nNextEdge.prototype.handler = _helper__WEBPACK_IMPORTED_MODULE_1__[\"awssfEdgeHandler\"];\nObject(_helper__WEBPACK_IMPORTED_MODULE_1__[\"registCodec\"])(NextEdge);\nconst RetryEdge = function () { };\nRetryEdge.prototype.type = 'Retry';\nRetryEdge.prototype.create = function (label, source, json, weight) {\n    if (label == null)\n        label = this.type;\n    if (!json)\n        json = { ErrorEquals: '', InterValSeconds: 1, MaxAttempts: 3, BackoffRate: 2 };\n    var cell = Object(_helper__WEBPACK_IMPORTED_MODULE_1__[\"createEdge\"])(this, label, 'edgeStyle=orthogonalEdgeStyle;curved=1;html=1;exitX=0.5;exitY=1;entryX=1;entryY=0.5;startArrow=none;startFill=0;jettySize=auto;orthogonalLoop=1;strokeColor=#000000;strokeWidth=1;fontSize=12;', source, source);\n    cell.geometry.setTerminalPoint(new mxPoint(0, cell.geometry.height), true);\n    cell.geometry.setTerminalPoint(new mxPoint(cell.geometry.width, 0), false);\n    // cell.setAttribute('label', '%error_equals%');\n    cell.setAttribute('placeholders', 1);\n    cell.setAttribute('error_equals', json.ErrorEquals || '');\n    cell.setAttribute('interval_seconds', json.IntervalSeconds || '');\n    cell.setAttribute('max_attempts', json.MaxAttempts || '');\n    cell.setAttribute('backoff_rate', json.BackoffRate || '');\n    cell.setAttribute('weight', weight || 1);\n    return cell;\n};\nRetryEdge.prototype.validate = function (cell, res) {\n    if (!res)\n        res = [];\n    if (!(cell.source && cell.target)) {\n        res.push(\"edge MUST be connected\");\n    }\n    if ((cell.source && cell.target) && (cell.source.id != cell.target.id)) {\n        res.push(\"retry edge target MUST be self\");\n    }\n    if (_utils__WEBPACK_IMPORTED_MODULE_0__[\"validateNumber\"](cell.getAttribute(\"interval_seconds\")) == false) {\n        res.push(\"interval_seconds MUST be a positive integer\");\n    }\n    if (_utils__WEBPACK_IMPORTED_MODULE_0__[\"validateNumber\"](cell.getAttribute(\"max_attempts\")) == false) {\n        res.push(\"max_attempts MUST be greater than or equal to 0\");\n    }\n    if ((_utils__WEBPACK_IMPORTED_MODULE_0__[\"validateNumber\"](cell.getAttribute(\"backoff_rate\")) == false) && (Number(cell.getAttribute(\"backoff_rate\")) >= 1)) {\n        res.push(\"backoff_rate MUST be greater than or equal to 1.0\");\n    }\n    return res;\n};\nRetryEdge.prototype.expJSON = function (cell, cells) {\n    var errors = cell.getAttribute(\"error_equals\");\n    errors = errors ? errors.split(/,\\s*/) : [];\n    if (cell.target != null) {\n        var data = {\n            ErrorEquals: errors,\n            IntervalSeconds: Number(cell.getAttribute(\"interval_seconds\")),\n            MaxAttempts: Number(cell.getAttribute(\"max_attempts\")),\n            BackoffRate: Number(cell.getAttribute(\"backoff_rate\"))\n        };\n        return data;\n    }\n    else {\n        return {};\n    }\n};\nRetryEdge.prototype.createHandlerImage = function () {\n    var img = _utils__WEBPACK_IMPORTED_MODULE_0__[\"createHandlerImage\"].call(this, RetryEdge, 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAXCAYAAADgKtSgAAACCUlEQVRIS7WVTUhUURTHf7NRN+JsUkER3UUI5kJMIoqBMNzkR6C7Elq5UReh0sIkgsCF0yJw5wdi2MYPEAyxLAhcuNBcFKLM4EJ0oU5I+FF648zzNe++d5/MM72rx7vn/M///s9XSCmlOO/EE7C8DUtbcDMfyvKgOHyui30ZMoInDqH9A0z8APl2n3AW1F6HvmqQb5/jBRfA5kkzqCnIwEMrkOHo4E8mYGg5rSdrRq2VEH3g8UuBC+O6seDAtsd4o+cFFrjoWvImJUWkBIbroCBbD3aiYH0XXn6BkW/6nWgfa9VyYIG75bDBZ9bg6VQKpKUCnt+BnQN49B5Wd/QAj8tgsPbfPws8/Bp+HqUM/cDFQpwlgS3TMLriZb/X4QCP7amkJM5zUXDBEGnO+iCkxr8rTyJN4NkZ0FwOHbdhcx8iQ7B/7C0AR2JDqvuTouezmbk7oX9OrU59NgvzcXNldd+FF/eSd+kxv1UIvfehNBeiC3jIOMNozNPV/MY1eNcARTnQNQf9i2bmmuZBqqWpFN7WwK/fJMv3Y0wPkJMJiU5XKaZb5+L2KgLtVfB1A+rH9KQa61w6tDiq13rQQSCs422GDhWgK5stNsuLTkVH+TkfbJ7nEsQ5DvwkEinscWCw8d9EbTOWVKYgAirzRWZ4oE3kZiA7VLrS3qGyR/9rhwatFB97syyXBP4Xec8Ry9TpbfEAAAAASUVORK5CYII=');\n    return img;\n};\nRetryEdge.prototype.handler = _helper__WEBPACK_IMPORTED_MODULE_1__[\"awssfEdgeHandler\"];\nObject(_helper__WEBPACK_IMPORTED_MODULE_1__[\"registCodec\"])(RetryEdge);\nconst CatchEdge = function () { };\nCatchEdge.prototype.type = 'Catch';\nCatchEdge.prototype.create = function (label, source, target, json, weight) {\n    if (label == null)\n        label = this.type;\n    if (!json)\n        json = {};\n    var cell = Object(_helper__WEBPACK_IMPORTED_MODULE_1__[\"createEdge\"])(this, label, 'endArrow=classic;html=1;strokeColor=#000000;strokeWidth=1;fontSize=12;', source, target, json);\n    // cell.setAttribute('label', '%error_equals%');\n    cell.setAttribute('placeholders', 1);\n    cell.setAttribute('error_equals', json.ErrorEquals || '');\n    cell.setAttribute('result_path', json.ResultPath || '');\n    cell.setAttribute('weight', weight || '1');\n    return cell;\n};\nCatchEdge.prototype.validate = function (cell, res) {\n    if (!res)\n        res = [];\n    if (!(cell.source && cell.target)) {\n        res.push(\"edge MUST be connected\");\n    }\n    if (_utils__WEBPACK_IMPORTED_MODULE_0__[\"validateJsonPath\"](cell.getAttribute(\"result_path\")) == false) {\n        res.push(\"result_path MUST use only supported jsonpath\");\n    }\n    return res;\n};\nCatchEdge.prototype.expJSON = function (cell, cells) {\n    var errors = cell.getAttribute(\"error_equals\");\n    errors = errors ? errors.split(/,\\s*/) : [];\n    if (cell.target != null) {\n        var data = {\n            ErrorEquals: errors,\n            Next: cells[cell.target.id].getAttribute(\"label\")\n        };\n        return data;\n    }\n    else {\n        return {};\n    }\n};\nCatchEdge.prototype.createHandlerImage = function () {\n    var img = _utils__WEBPACK_IMPORTED_MODULE_0__[\"createHandlerImage\"].call(this, CatchEdge, 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAXCAYAAADgKtSgAAACFklEQVRIS7WVT0hUURTGf5NRbsRZBLlImHZKwRREM2Cg48YWoRNE2SIq3BSloxudTToqkUXguBSCDEFsETMtRmqlxSi2CLIg3ESDDEOhlOJmimDi+Ob5/t2Z8RXe1Xv3nfed737nu+d4CoVCgX1anj2Bb2bg+wp8+wB1p+CoH7y+ipRKg+c34XUfrCZBnu2r2gsNYWgbB3lWLDW4AL68qQZVJel4qiWyLSd48gasPKt4ZEdAIALn45ZtK7gwfn7RPbD+x5WE5QQGuOg6cdwpxekuCEbgSCMcOAh/8rCWhvl7kF22EhHtI193a2CAq+Rova8BZ9/B21HIvdfeRYLtHLy4CuufrQn81yE8tbNngI954deWEXgsCJdm4ccXmA3D723jW2gEznbDchzeDDvZD/w0gYuPRRLzah6EYB+kH8DiI3d1EGm8viJzVSHbn8CJy5C6Ax+n3YEXC6vJshBzHu/CJJzshLm77sGbh6AlVoZ5Uz80DcDiQ6csh2rgXBQ2VtWJLcxVmpcraKAHQqPwaQZSt52SWTSXz3a3yJ7ZikuPNX/rVpR7kbjm9PrhWohqvai8zyVCpDlzC2rrwVNV/hJJvNLnwiTus3rdnUdAWPdmFDdUgPatt+gs/7UrFu1nPmzpfi5JzO2glEQihfSSPfVzHURq8KpXk0qVREAFUHq4q0lkZyn3QOanPkNljv7XDHXrFEX8X1YGE8t/bBUwAAAAAElFTkSuQmCC');\n    return img;\n};\nCatchEdge.prototype.handler = _helper__WEBPACK_IMPORTED_MODULE_1__[\"awssfEdgeHandler\"];\nObject(_helper__WEBPACK_IMPORTED_MODULE_1__[\"registCodec\"])(CatchEdge);\nconst ChoiceEdge = function () { };\nChoiceEdge.prototype.type = 'Choice';\nChoiceEdge.prototype.create = function (label, source, target, json, weight) {\n    if (label == null)\n        label = this.type;\n    if (!json)\n        json = {};\n    var cell = Object(_helper__WEBPACK_IMPORTED_MODULE_1__[\"createEdge\"])(this, label, 'endArrow=classic;html=1;strokeColor=#000000;strokeWidth=1;fontSize=12;', source, target);\n    // cell.setAttribute('label', '%condition%');\n    cell.setAttribute('placeholders', 1);\n    cell.setAttribute('condition', _utils__WEBPACK_IMPORTED_MODULE_0__[\"ruleToJSEP\"](json) || '$.foo == 1');\n    cell.setAttribute('weight', weight || '1');\n    return cell;\n};\nChoiceEdge.prototype.validate = function (cell, res) {\n    if (!res)\n        res = [];\n    if (!(cell.source && cell.target)) {\n        res.push(\"edge MUST be connected\");\n    }\n    var condition = cell.getAttribute(\"condition\");\n    if (condition) {\n        try {\n            jsep(condition);\n        }\n        catch (e) {\n            res.push(\"invalid jsep.\");\n        }\n    }\n    else {\n        res.push(\"condition MUST be defined\");\n    }\n    return res;\n};\nChoiceEdge.prototype.expJSON = function (cell, cells) {\n    if (cell.target != null) {\n        var condition = cell.getAttribute(\"condition\");\n        var data;\n        if (condition != null) {\n            var tree = jsep(condition);\n            data = _utils__WEBPACK_IMPORTED_MODULE_0__[\"parseJSEPExpr\"](tree);\n        }\n        data.Next = cells[cell.target.id].getAttribute(\"label\");\n        return data;\n    }\n    else {\n        return {};\n    }\n};\nChoiceEdge.prototype.createHandlerImage = function () {\n    var img = _utils__WEBPACK_IMPORTED_MODULE_0__[\"createHandlerImage\"].call(this, ChoiceEdge, 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAXCAYAAADgKtSgAAACWUlEQVRIS7WVXW/SUBjH/12AGZDSDkkwQ40mytCxmC1z6Fx82RUXiiYz8WvMO/0AXrqPoYkandF4t+iWuSXTRMkcu1OUKbFAAWFCy1ZzaoCe9oDUl3PV5pzzO8/L/3keTtM0DV1WsdpAVlaRLSoICi4ERScEj6PbldYex4LX1F08fyNjM7MN8m1ee5x9GAq5ER8TQb47LQs8ldnG49U8E8p65ErMj0jIzeRT8EerObz9UO3JZeOhWNiL+OiA5V4LTiy+tyTZBjcvXJ8KWDzQ4SSuc/NbllCMHtmLWJhHwOdEHwc0djSkpToWkkVk8nXKEBL72cQglQMdzgrH9Iiggwnk5XoJXwp1/f90mMf3Hzu4vyxBKqvUAycPe3A1to9Wy+0Hn1BX24oM+ftxbTKAQkXF3cVvUBrtvYtRARNhL1Y2y3ixXrJYf3PmQBsuV1Rt7skWdejcsA9nhngsvi9hOVW2lYfZy4OtOuA2Plc1cyITp/w4cciDZ2t5vPtoTz3GxHILSVkzu3dp3I8ogb+2Dz8/7MOFqKB7y7R8MsJj6rgPSxvWsLgcnL6XK6tMryjLWTHvltCJY15Mj4hIpit4ulaw5IOKOZGiWS3khlGKr1JlpKVaS4o1ZRcPV3IWrfc7OdyaOUhLsVPZn43wGD/qBe92/LaICJGpc1Khd+YzlNZt6Q8AsfpGImStUAL6b72laeWfdkWj/IweM/s5ecTYDjqFiISC9JKe+nkT8msSFfRQsR4hUAKMjw3Ym0RmK8kM/SoryMoKgqIL+0XX381Qu0rpeYb+KzDh/AQ2ZmDL5ziOTgAAAABJRU5ErkJggg==');\n    return img;\n};\nChoiceEdge.prototype.handler = _helper__WEBPACK_IMPORTED_MODULE_1__[\"awssfEdgeHandler\"];\nObject(_helper__WEBPACK_IMPORTED_MODULE_1__[\"registCodec\"])(ChoiceEdge);\nconst DefaultEdge = function DefaultEdge() { };\nDefaultEdge.prototype.type = 'Default';\nDefaultEdge.prototype.create = function (label, source, target) {\n    if (label == null)\n        label = this.type;\n    var cell = Object(_helper__WEBPACK_IMPORTED_MODULE_1__[\"createEdge\"])(this, label, 'endArrow=classic;html=1;strokeColor=#000000;strokeWidth=1;fontSize=12;', source, target);\n    return cell;\n};\nDefaultEdge.prototype.validate = function (cell, res) {\n    if (!res)\n        res = [];\n    if (!(cell.source && cell.target)) {\n        res.push(\"edge MUST be connected\");\n    }\n    return res;\n};\nDefaultEdge.prototype.expJSON = function (cell, cells) {\n    if (cell.target != null) {\n        var data = {\n            Default: cells[cell.target.id].getAttribute(\"label\")\n        };\n        return data;\n    }\n    else {\n        return {};\n    }\n};\nDefaultEdge.prototype.createHandlerImage = function () {\n    var img = _utils__WEBPACK_IMPORTED_MODULE_0__[\"createHandlerImage\"].call(this, DefaultEdge, 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAYCAYAAAARfGZ1AAABsklEQVRIS9WVO0sDQRDH/9ek0YAQsEgQFCRpxCaKmuoOQRtN7aOxEVtBP0B8gCARrESwsdI+WoggHkGDoH6ABPGJdhYaEY3Fyma53L5yXoIRHLjmduY3s/PYMQghBB5SfAKeC+wLRdkXDHtZuGeGDl4qArk14NYGSm8qKNAMtJtAYg4IBKs7UuAUaKf0UBlDnZgp5kgnApxCC/v+rsxrdY0BiXnVrgKnER9qFPy6GkqrNyjDaY53Rt1UhHsAaxFoauXQBPgsAndZ4HQV+HoX3dIUTeyJNSjD5XQ48IcckF1mkJYOoHsS6BwGro9YXWSJjrAaOFKGb5tiAXVwx8BaAtoGgFwauDpQo5+yOfjrIyG7SVHJCx5LAv2zQD4DnK2r0Y9n3Dkwbo4JkQvpBfc6o674whoXm4RcbvmPPNIHWAvA/YlbD946Pg3EZ9ifmiP/KS1C5LXmfHAFiPSyqOlsyCLk3G+3+GlF2utCt3j1uTxEHy+s/c431CGiN9D2uTyhfkee16s6oVSpYW+LE0G9ryLffvxt/u49d7w2bBPJxazs0DwQiv3CDq2nW3Q22gX9L+Df4kMPyOkzB4MAAAAASUVORK5CYII=');\n    return img;\n};\nDefaultEdge.prototype.handler = _helper__WEBPACK_IMPORTED_MODULE_1__[\"awssfEdgeHandler\"];\nObject(_helper__WEBPACK_IMPORTED_MODULE_1__[\"registCodec\"])(DefaultEdge);\n\n\n\n//# sourceURL=webpack:///./src/states/edge.ts?");

/***/ }),

/***/ "./src/states/fail.ts":
/*!****************************!*\
  !*** ./src/states/fail.ts ***!
  \****************************/
/*! exports provided: FailState */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FailState\", function() { return FailState; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"./src/utils.ts\");\n/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./helper */ \"./src/states/helper.ts\");\n\n\nconst FailState = function () { };\nFailState.prototype.type = 'Fail';\nFailState.prototype.create = function (label, json) {\n    if (!json)\n        json = {};\n    var style = 'shape=mxgraph.flowchart.terminator;html=1;whiteSpace=wrap;gradientColor=none;';\n    var cell = Object(_helper__WEBPACK_IMPORTED_MODULE_1__[\"createState\"])(this, label, style, json);\n    cell.setAttribute('error', json.Error || '');\n    cell.setAttribute('cause', json.Cause || '');\n    cell.value.removeAttribute('input_path');\n    cell.value.removeAttribute('output_path');\n    return cell;\n};\nFailState.prototype.validate = function (cell, res) {\n    if (!res)\n        res = [];\n    if (cell.edges &&\n        (cell.edges.filter(function (v) { return (v.source == cell) && _utils__WEBPACK_IMPORTED_MODULE_0__[\"isAWSsf\"](v); }).length > 0)) {\n        res.push(\"A Fail state MUST have no outgoing edge\");\n    }\n    if (!cell.getAttribute(\"error\")) {\n        res.push(\"error MUST have a value\");\n    }\n    if (!cell.getAttribute(\"cause\")) {\n        res.push(\"cause MUST have a value\");\n    }\n    return _utils__WEBPACK_IMPORTED_MODULE_0__[\"validateCommonAttributes\"](cell, res, false);\n};\nFailState.prototype.expJSON = function (cell, cells) {\n    var data = {};\n    var label = cell.getAttribute(\"label\");\n    data[label] = {\n        Type: \"Fail\",\n        Error: cell.getAttribute(\"error\"),\n        Cause: cell.getAttribute(\"cause\")\n    };\n    if (cell.getAttribute(\"comment\"))\n        data[label].Comment = cell.getAttribute(\"comment\");\n    return data;\n};\nObject(_helper__WEBPACK_IMPORTED_MODULE_1__[\"registCodec\"])(FailState);\nFailState.prototype.handler = _helper__WEBPACK_IMPORTED_MODULE_1__[\"awssfStateHandler\"];\n\n\n//# sourceURL=webpack:///./src/states/fail.ts?");

/***/ }),

/***/ "./src/states/helper.ts":
/*!******************************!*\
  !*** ./src/states/helper.ts ***!
  \******************************/
/*! exports provided: init, registCodec, awssfStateHandler, awssfEdgeHandler, createState, createPoint, createEdge */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"init\", function() { return init; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"registCodec\", function() { return registCodec; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"awssfStateHandler\", function() { return awssfStateHandler; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"awssfEdgeHandler\", function() { return awssfEdgeHandler; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"createState\", function() { return createState; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"createPoint\", function() { return createPoint; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"createEdge\", function() { return createEdge; });\nvar ui;\nvar graph;\nfunction init(editorUi) {\n    ui = editorUi;\n    graph = editorUi.editor ? editorUi.editor.graph : editorUi.graph;\n}\nfunction registCodec(func) {\n    var codec = new mxObjectCodec(new func());\n    codec.encode = function (enc, obj) {\n        try {\n            var data = enc.document.createElement(func.name);\n        }\n        catch (e) {\n            console.log(\"encode error\", e);\n        }\n        return data;\n    };\n    codec.decode = function (dec, node, into) {\n        return new func();\n    };\n    mxCodecRegistry.register(codec);\n}\nfunction createSettingsIcon() {\n    var img = mxUtils.createImage('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAXCAYAAADgKtSgAAACpklEQVRIS7VVMU9TURg9nWiZoF0k1MQmlKCREhhowUHaScpWdYHoINUORoKTiT+AhMnE6IDigraL2g10amGhxaFGMJHQJiWxBJcWJl6Zas4H9/leH4VKwl2a13vv+c73nfN911ar1Wq4oGVrBpzxq9VDnYLd3gKbzXYmpabAs2s5bBWKCAwOIPstJ7/dXs/5wNMrGfh6e+BytgvA4pcU3J0d6PNdRWp5FZpWxdhoSPbKlT2sb2wieHPIEszC/H08iQNNQ6m0i1DwBhwOu4BPP3kgwUo7u+CZ4MiwBMlkc3C52tDqcODeRMQUwAROVvlCEbHohFz8mFyUw2SpsuA3A/AsAblHAnPzcXi7PAiNDOsBTOBMce5tAk+nJuWCceUL2/qnt+uKaY9EXrx8h9jDcRMJS1nIqFLZx51IWAB+rP+SsjB11p2sy+V9YUwNuD4ll+B0tplY838LuHLG/YnbOnA9I5WhCrAQ/4zuLg8C/gFrzenjjZ+bKO38QWYtp4s3M/vakqq6rQI8f/ZYHPNmPoE+3zW4Oy+h93qP9IEwV+Ixutfrkbpt5YtIr6yKuI0W60z29DwD5PNF6Ye7kTHRTAf/Xdo1NQbB6Rzl55MCUAs6xNhQvHfZ3WEGpyhkTSecm3lhW9jTDDpz1pxdRifQHUrA/6k5LUz30FHsbr3mxpTr3bL0NYVHUbN/lYDhW0d2PNUtRvDGPm+XWlKbcnnP5POmwE/rUAqlVv1EpNtmZl9hemqycYcezZZtxKLjMlsoMld4NGiZLenljIj2b7YkxAwNZwuBmKKmHUrqAX8/WtVUPGZF0Rc+JBEaGcKBVkV27TtcrnY4HC1gVxvXiY8FM6BQzcxzBmPJjIxVgKZfIpaLs4Nu8g/2n/8lqu/GC31DGw6XMzb+An4I4cvYKbPGAAAAAElFTkSuQmCC');\n    img.setAttribute('title', 'Settings');\n    img.style.cursor = 'pointer';\n    img.style.width = '16px';\n    img.style.height = '16px';\n    return img;\n}\nconst awssfStateHandler = function (state) {\n    mxVertexHandler.apply(this, arguments);\n};\nawssfStateHandler.prototype = new mxVertexHandler();\nawssfStateHandler.prototype.constructor = awssfStateHandler;\nawssfStateHandler.prototype.domNode = null;\nawssfStateHandler.prototype.init = function () {\n    mxVertexHandler.prototype.init.apply(this, arguments);\n    this.domNode = document.createElement('div');\n    this.domNode.style.position = 'absolute';\n    this.domNode.style.whiteSpace = 'nowrap';\n    if (this.custom)\n        this.custom.apply(this, arguments);\n    var img = createSettingsIcon();\n    mxEvent.addGestureListeners(img, mxUtils.bind(this, function (evt) { mxEvent.consume(evt); }));\n    mxEvent.addListener(img, 'click', mxUtils.bind(this, function (evt) {\n        ui.actions.get('editData').funct();\n        mxEvent.consume(evt);\n    }));\n    this.domNode.appendChild(img);\n    this.graph.container.appendChild(this.domNode);\n    this.redrawTools();\n};\nawssfStateHandler.prototype.redraw = function () {\n    mxVertexHandler.prototype.redraw.apply(this);\n    this.redrawTools();\n};\nawssfStateHandler.prototype.redrawTools = function () {\n    if (this.state != null && this.domNode != null) {\n        var dy = (mxClient.IS_VML && document.compatMode == 'CSS1Compat') ? 20 : 4;\n        this.domNode.style.left = (this.state.x + this.state.width - this.domNode.children.length * 14) + 'px';\n        this.domNode.style.top = (this.state.y + this.state.height + dy) + 'px';\n    }\n};\nawssfStateHandler.prototype.destroy = function (sender, me) {\n    mxVertexHandler.prototype.destroy.apply(this, arguments);\n    if (this.domNode != null) {\n        this.domNode.parentNode.removeChild(this.domNode);\n        this.domNode = null;\n    }\n};\nconst awssfEdgeHandler = function (state) {\n    mxEdgeHandler.apply(this, arguments);\n};\nawssfEdgeHandler.prototype = new mxEdgeHandler();\nawssfEdgeHandler.prototype.constructor = awssfEdgeHandler;\nawssfEdgeHandler.prototype.domNode = null;\nawssfEdgeHandler.prototype.init = function () {\n    mxEdgeHandler.prototype.init.apply(this, arguments);\n    this.domNode = document.createElement('div');\n    this.domNode.style.position = 'absolute';\n    this.domNode.style.whiteSpace = 'nowrap';\n    if (this.custom)\n        this.custom.apply(this, arguments);\n    var img = createSettingsIcon();\n    mxEvent.addGestureListeners(img, mxUtils.bind(this, function (evt) { mxEvent.consume(evt); }));\n    mxEvent.addListener(img, 'click', mxUtils.bind(this, function (evt) {\n        ui.actions.get('editData').funct();\n        mxEvent.consume(evt);\n    }));\n    this.domNode.appendChild(img);\n    this.graph.container.appendChild(this.domNode);\n    this.redrawTools();\n};\nawssfEdgeHandler.prototype.redraw = function () {\n    mxEdgeHandler.prototype.redraw.apply(this);\n    this.redrawTools();\n};\nawssfEdgeHandler.prototype.redrawTools = function () {\n    if (this.state != null && this.domNode != null) {\n        var dy = (mxClient.IS_VML && document.compatMode == 'CSS1Compat') ? 20 : 4;\n        this.domNode.style.left = (this.labelShape.bounds.x + this.labelShape.bounds.width) + 'px';\n        this.domNode.style.top = (this.labelShape.bounds.y) + 'px';\n    }\n};\nawssfEdgeHandler.prototype.destroy = function (sender, me) {\n    mxEdgeHandler.prototype.destroy.apply(this, arguments);\n    if (this.domNode != null) {\n        this.domNode.parentNode.removeChild(this.domNode);\n        this.domNode = null;\n    }\n};\nfunction createState(awssf, name, style, json) {\n    var label = name || awssf.type;\n    if (!style)\n        style = 'rounded=1;whiteSpace=wrap;html=1;gradientColor=none;dashed=1';\n    if (!json)\n        json = {};\n    var pt = (graph.isMouseInsertPoint()) ? graph.getInsertPoint() : graph.getFreeInsertPoint();\n    var geometry = new mxGeometry(pt.x, pt.y, 80, 40);\n    var cell = new mxCell(label, geometry, style);\n    cell.vertex = true;\n    cell.value = mxUtils.createXmlDocument().createElement('object');\n    cell.setAttribute('label', label);\n    cell.setAttribute('type', 'awssf' + awssf.type);\n    cell.setAttribute('comment', json.Comment || '');\n    cell.setAttribute('input_path', json.InputPath || '');\n    cell.setAttribute('output_path', json.OutputPath || '');\n    cell.awssf = awssf;\n    return cell;\n}\nfunction createPoint(awssf, geometry) {\n    var label = awssf.type;\n    if (geometry == null) {\n        var pt = (graph.isMouseInsertPoint()) ? graph.getInsertPoint() : graph.getFreeInsertPoint();\n        geometry = new mxGeometry(pt.x, pt.y, 40, 40);\n    }\n    var cell = new mxCell(label, geometry, 'ellipse;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;');\n    cell.vertex = true;\n    cell.value = mxUtils.createXmlDocument().createElement('object');\n    cell.setAttribute('label', label);\n    cell.setAttribute('type', 'awssf' + label);\n    cell.awssf = awssf;\n    return cell;\n}\nfunction createEdge(awssf, label, style, source, target, json) {\n    var cell = new mxCell(label, new mxGeometry(0, 0, 60, 60), style);\n    cell.geometry.setTerminalPoint(new mxPoint(0, 0), true);\n    cell.geometry.setTerminalPoint(new mxPoint(cell.geometry.width, cell.geometry.height), false);\n    cell.geometry.relative = true;\n    cell.edge = true;\n    cell.value = mxUtils.createXmlDocument().createElement('object');\n    cell.setAttribute('label', label);\n    cell.setAttribute('type', 'awssf' + awssf.type);\n    cell.awssf = awssf;\n    if (source && target) {\n        cell.source = source;\n        cell.target = target;\n    }\n    return cell;\n}\n\n\n//# sourceURL=webpack:///./src/states/helper.ts?");

/***/ }),

/***/ "./src/states/index.ts":
/*!*****************************!*\
  !*** ./src/states/index.ts ***!
  \*****************************/
/*! exports provided: setupStates */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setupStates\", function() { return setupStates; });\n/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helper */ \"./src/states/helper.ts\");\n/* harmony import */ var _awsconfig__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./awsconfig */ \"./src/states/awsconfig.ts\");\n/* harmony import */ var _choice__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./choice */ \"./src/states/choice.ts\");\n/* harmony import */ var _edge__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./edge */ \"./src/states/edge.ts\");\n/* harmony import */ var _fail__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./fail */ \"./src/states/fail.ts\");\n/* harmony import */ var _parallel__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./parallel */ \"./src/states/parallel.ts\");\n/* harmony import */ var _pass__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./pass */ \"./src/states/pass.ts\");\n/* harmony import */ var _point__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./point */ \"./src/states/point.ts\");\n/* harmony import */ var _succeed__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./succeed */ \"./src/states/succeed.ts\");\n/* harmony import */ var _task__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./task */ \"./src/states/task.ts\");\n/* harmony import */ var _wait__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./wait */ \"./src/states/wait.ts\");\n\n\n\n\n\n\n\n\n\n\n\nfunction setupStates(editorUi) {\n    _helper__WEBPACK_IMPORTED_MODULE_0__[\"init\"](editorUi);\n    window['AWSconfig'] = _awsconfig__WEBPACK_IMPORTED_MODULE_1__[\"AWSconfig\"];\n    window['ChoiceState'] = _choice__WEBPACK_IMPORTED_MODULE_2__[\"ChoiceState\"];\n    window['FailState'] = _fail__WEBPACK_IMPORTED_MODULE_4__[\"FailState\"];\n    window['ParallelState'] = _parallel__WEBPACK_IMPORTED_MODULE_5__[\"ParallelState\"];\n    window['PassState'] = _pass__WEBPACK_IMPORTED_MODULE_6__[\"PassState\"];\n    window['StartPoint'] = _point__WEBPACK_IMPORTED_MODULE_7__[\"StartPoint\"];\n    window['EndPoint'] = _point__WEBPACK_IMPORTED_MODULE_7__[\"EndPoint\"];\n    window['SucceedState'] = _succeed__WEBPACK_IMPORTED_MODULE_8__[\"SucceedState\"];\n    window['TaskState'] = _task__WEBPACK_IMPORTED_MODULE_9__[\"TaskState\"];\n    window['WaitState'] = _wait__WEBPACK_IMPORTED_MODULE_10__[\"WaitState\"];\n    window['StartAtEdge'] = _edge__WEBPACK_IMPORTED_MODULE_3__[\"StartAtEdge\"];\n    window['NextEdge'] = _edge__WEBPACK_IMPORTED_MODULE_3__[\"NextEdge\"];\n    window['RetryEdge'] = _edge__WEBPACK_IMPORTED_MODULE_3__[\"RetryEdge\"];\n    window['CatchEdge'] = _edge__WEBPACK_IMPORTED_MODULE_3__[\"CatchEdge\"];\n    window['ChoiceEdge'] = _edge__WEBPACK_IMPORTED_MODULE_3__[\"ChoiceEdge\"];\n    window['DefaultEdge'] = _edge__WEBPACK_IMPORTED_MODULE_3__[\"DefaultEdge\"];\n}\n\n\n//# sourceURL=webpack:///./src/states/index.ts?");

/***/ }),

/***/ "./src/states/parallel.ts":
/*!********************************!*\
  !*** ./src/states/parallel.ts ***!
  \********************************/
/*! exports provided: ParallelState */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ParallelState\", function() { return ParallelState; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"./src/utils.ts\");\n/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./helper */ \"./src/states/helper.ts\");\n\n\nconst ParallelState = function () { };\nParallelState.prototype.type = 'Parallel';\nParallelState.prototype.create = function (label, json) {\n    if (!json)\n        json = {};\n    var style = 'swimlane;whiteSpace=wrap;html=1;dashed=1;gradientColor=none';\n    var cell = Object(_helper__WEBPACK_IMPORTED_MODULE_1__[\"createState\"])(this, label, style);\n    var pt = cell.getGeometry();\n    cell.setGeometry(new mxGeometry(pt.x, pt.y, 480, 200));\n    cell.setAttribute('result_path', json.ResultPath || '');\n    cell.setAttribute('branches', '');\n    var sp = StartPoint.prototype.create(new mxGeometry((cell.geometry.width - 30) / 2, 40, 30, 30));\n    cell.insert(sp);\n    if (Object.keys(json).length === 0) {\n        var task1 = TaskState.prototype.create();\n        task1.setGeometry(new mxGeometry(80, 80, task1.geometry.width, task1.geometry.height));\n        cell.insert(task1);\n        var edge1 = StartAtEdge.prototype.create('StartAt', sp, task1);\n        cell.insert(edge1);\n        var task2 = TaskState.prototype.create();\n        task2.setGeometry(new mxGeometry(320, 80, task2.geometry.width, task2.geometry.height));\n        cell.insert(task2);\n        var edge2 = StartAtEdge.prototype.create('StartAt', sp, task2);\n        cell.insert(edge2);\n    }\n    return cell;\n};\nParallelState.prototype.hiddenAttributes = ['branches'];\nParallelState.prototype.createDefaultEdge = function (src) {\n    for (var i in src.edges) {\n        var edge = src.edges[i];\n        if ((edge.source == src) && _utils__WEBPACK_IMPORTED_MODULE_0__[\"isNext\"](edge))\n            return CatchEdge.prototype.create();\n    }\n    return NextEdge.prototype.create();\n};\nParallelState.prototype.validate = function (cell, res) {\n    return _utils__WEBPACK_IMPORTED_MODULE_0__[\"validateCommonAttributes\"](cell, res, true);\n};\nParallelState.prototype.expJSON = function (cell, cells) {\n    var data = {};\n    var label = cell.getAttribute(\"label\");\n    data[label] = {\n        Type: \"Parallel\",\n        Branches: []\n    };\n    if (cell.getAttribute(\"comment\"))\n        data[label].Comment = cell.getAttribute(\"comment\");\n    if (cell.getAttribute(\"input_path\"))\n        data[label].InputPath = _utils__WEBPACK_IMPORTED_MODULE_0__[\"adjustJsonPath\"](cell.getAttribute(\"input_path\"));\n    if (cell.getAttribute(\"output_path\"))\n        data[label].OutputPath = _utils__WEBPACK_IMPORTED_MODULE_0__[\"adjustJsonPath\"](cell.getAttribute(\"output_path\"));\n    if (cell.getAttribute(\"result_path\"))\n        data[label].ResultPath = _utils__WEBPACK_IMPORTED_MODULE_0__[\"adjustJsonPath\"](cell.getAttribute(\"result_path\"));\n    var startat = [];\n    for (const child of cell.children) {\n        if (!_utils__WEBPACK_IMPORTED_MODULE_0__[\"isStart\"](child))\n            continue;\n        for (const edge of child.edges) {\n            if (edge.target == child)\n                continue;\n            if (_utils__WEBPACK_IMPORTED_MODULE_0__[\"isStartAt\"](edge)) {\n                startat.push(cells[edge.target.id]);\n            }\n        }\n    }\n    function traceAll(state, res) {\n        res.push(state);\n        for (var j in state.edges) {\n            var edge = state.edges[j];\n            if (edge.target == state)\n                continue;\n            traceAll(cells[edge.target.id], res);\n        }\n        return res;\n    }\n    for (const start of startat) {\n        var branch = [];\n        traceAll(start, branch);\n        var states = {};\n        for (const child of branch) {\n            if (child.value == null || typeof (child.value) != \"object\")\n                continue;\n            if (!_utils__WEBPACK_IMPORTED_MODULE_0__[\"isAWSsf\"](child))\n                continue;\n            if (_utils__WEBPACK_IMPORTED_MODULE_0__[\"isStart\"](child) || _utils__WEBPACK_IMPORTED_MODULE_0__[\"isEnd\"](cell))\n                continue;\n            if (child.isVertex()) {\n                if (_utils__WEBPACK_IMPORTED_MODULE_0__[\"isParallel\"](child))\n                    continue;\n                if (child.awssf && child.awssf.expJSON) {\n                    Object.assign(states, child.awssf.expJSON(child, cells));\n                }\n            }\n        }\n        data[label].Branches.push({\n            StartAt: start.getAttribute(\"label\"),\n            States: states\n        });\n    }\n    var existNextEdge = false;\n    if (cell.edges) {\n        var sortedEdges = cell.edges.sort(function (a, b) {\n            if (Number(a.getAttribute(\"weight\")) > Number(b.getAttribute(\"weight\")))\n                return -1;\n            if (Number(a.getAttribute(\"weight\")) < Number(b.getAttribute(\"weight\")))\n                return 1;\n            return 0;\n        });\n        for (const edge of sortedEdges) {\n            if (edge.source != cell)\n                continue;\n            if (edge.awssf.expJSON) {\n                if (_utils__WEBPACK_IMPORTED_MODULE_0__[\"isRetry\"](edge)) {\n                    if (!data[label][\"Retry\"])\n                        data[label][\"Retry\"] = [];\n                    data[label][\"Retry\"].push(edge.awssf.expJSON(edge, cells));\n                }\n                else if (_utils__WEBPACK_IMPORTED_MODULE_0__[\"isCatch\"](edge)) {\n                    if (!data[label][\"Catch\"])\n                        data[label][\"Catch\"] = [];\n                    data[label][\"Catch\"].push(edge.awssf.expJSON(edge, cells));\n                }\n                else if (_utils__WEBPACK_IMPORTED_MODULE_0__[\"isNext\"](edge)) {\n                    existNextEdge = true;\n                    Object.assign(data[label], edge.awssf.expJSON(edge, cells));\n                }\n            }\n        }\n    }\n    if (existNextEdge == false || data[label].Next == 'End') {\n        delete data[label]['Next'];\n        data[label][\"End\"] = true;\n    }\n    return data;\n};\nObject(_helper__WEBPACK_IMPORTED_MODULE_1__[\"registCodec\"])(ParallelState);\nvar ParallelStateHandler = function (state) {\n    this.custom = function () {\n        this.domNode.appendChild(NextEdge.prototype.createHandlerImage.apply(this, arguments));\n        this.domNode.appendChild(CatchEdge.prototype.createHandlerImage.apply(this, arguments));\n        this.domNode.appendChild(RetryEdge.prototype.createHandlerImage.apply(this, arguments));\n    };\n    _helper__WEBPACK_IMPORTED_MODULE_1__[\"awssfStateHandler\"].apply(this, arguments);\n};\nParallelState.prototype.handler = ParallelStateHandler;\nmxUtils.extend(ParallelStateHandler, _helper__WEBPACK_IMPORTED_MODULE_1__[\"awssfStateHandler\"]);\n\n\n//# sourceURL=webpack:///./src/states/parallel.ts?");

/***/ }),

/***/ "./src/states/pass.ts":
/*!****************************!*\
  !*** ./src/states/pass.ts ***!
  \****************************/
/*! exports provided: PassState */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PassState\", function() { return PassState; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"./src/utils.ts\");\n/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./helper */ \"./src/states/helper.ts\");\n\n\nconst PassState = function () { };\nPassState.prototype.type = 'Pass';\nPassState.prototype.create = function (label, json) {\n    if (!json)\n        json = {};\n    var style = 'shape=mxgraph.flowchart.process;whiteSpace=wrap;gradientColor=none;html=1;';\n    var cell = Object(_helper__WEBPACK_IMPORTED_MODULE_1__[\"createState\"])(this, label, style, json);\n    cell.value.setAttribute('result', json.Result || '');\n    cell.value.setAttribute('result_path', json.ResultPath || '');\n    return cell;\n};\nPassState.prototype.createDefaultEdge = function (src) {\n    for (var i in src.edges) {\n        var edge = src.edges[i];\n        if ((edge.source == src) && _utils__WEBPACK_IMPORTED_MODULE_0__[\"isNext\"](edge))\n            return null;\n    }\n    return NextEdge.prototype.create();\n};\nPassState.prototype.validate = function (cell, res) {\n    return _utils__WEBPACK_IMPORTED_MODULE_0__[\"validateCommonAttributes\"](cell, res, true);\n};\nPassState.prototype.expJSON = function (cell, cells) {\n    var data = {};\n    var label = cell.getAttribute(\"label\");\n    data[label] = {\n        Type: \"Pass\"\n    };\n    if (cell.getAttribute(\"comment\"))\n        data[label].Comment = cell.getAttribute(\"comment\");\n    if (cell.getAttribute(\"input_path\"))\n        data[label].InputPath = _utils__WEBPACK_IMPORTED_MODULE_0__[\"adjustJsonPath\"](cell.getAttribute(\"input_path\"));\n    if (cell.getAttribute(\"output_path\"))\n        data[label].OutputPath = _utils__WEBPACK_IMPORTED_MODULE_0__[\"adjustJsonPath\"](cell.getAttribute(\"output_path\"));\n    if (cell.getAttribute(\"result_path\"))\n        data[label].ResultPath = _utils__WEBPACK_IMPORTED_MODULE_0__[\"adjustJsonPath\"](cell.getAttribute(\"result_path\"));\n    if (cell.getAttribute(\"result\"))\n        data[label].Result = cell.getAttribute(\"result\");\n    var existNextEdge = false;\n    for (var i in cell.edges) {\n        var edge = cell.edges[i];\n        if (edge.source != cell)\n            continue;\n        if (_utils__WEBPACK_IMPORTED_MODULE_0__[\"isNext\"](edge)) {\n            existNextEdge = true;\n            Object.assign(data[label], edge.awssf.expJSON(edge, cells));\n        }\n    }\n    if (existNextEdge == false || data[label].Next == 'End') {\n        delete data[label]['Next'];\n        data[label][\"End\"] = true;\n    }\n    return data;\n};\nObject(_helper__WEBPACK_IMPORTED_MODULE_1__[\"registCodec\"])(PassState);\nvar PassStateHandler = function (state) {\n    this.custom = function () {\n        this.domNode.appendChild(NextEdge.prototype.createHandlerImage.apply(this, arguments));\n    };\n    _helper__WEBPACK_IMPORTED_MODULE_1__[\"awssfStateHandler\"].apply(this, arguments);\n};\nPassState.prototype.handler = PassStateHandler;\nmxUtils.extend(PassStateHandler, _helper__WEBPACK_IMPORTED_MODULE_1__[\"awssfStateHandler\"]);\n\n\n//# sourceURL=webpack:///./src/states/pass.ts?");

/***/ }),

/***/ "./src/states/point.ts":
/*!*****************************!*\
  !*** ./src/states/point.ts ***!
  \*****************************/
/*! exports provided: StartPoint, EndPoint */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"StartPoint\", function() { return StartPoint; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EndPoint\", function() { return EndPoint; });\n/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helper */ \"./src/states/helper.ts\");\n\nconst StartPoint = function () { };\nStartPoint.prototype.type = 'Start';\nStartPoint.prototype.create = function (geometry) {\n    var cell = Object(_helper__WEBPACK_IMPORTED_MODULE_0__[\"createPoint\"])(this, geometry);\n    return cell;\n};\nStartPoint.prototype.createDefaultEdge = function () {\n    return StartAtEdge.prototype.create();\n};\nconst EndPoint = function () { };\nEndPoint.prototype.type = 'End';\nEndPoint.prototype.create = function () {\n    var cell = Object(_helper__WEBPACK_IMPORTED_MODULE_0__[\"createPoint\"])(this);\n    return cell;\n};\n\n\n\n//# sourceURL=webpack:///./src/states/point.ts?");

/***/ }),

/***/ "./src/states/succeed.ts":
/*!*******************************!*\
  !*** ./src/states/succeed.ts ***!
  \*******************************/
/*! exports provided: SucceedState */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SucceedState\", function() { return SucceedState; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"./src/utils.ts\");\n/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./helper */ \"./src/states/helper.ts\");\n\n\nconst SucceedState = function () { };\nSucceedState.prototype.type = 'Succeed';\nSucceedState.prototype.create = function (label, json) {\n    if (!json)\n        json = {};\n    var style = 'shape=mxgraph.flowchart.terminator;html=1;whiteSpace=wrap;gradientColor=none;';\n    var cell = Object(_helper__WEBPACK_IMPORTED_MODULE_1__[\"createState\"])(this, label, style, json);\n    return cell;\n};\nSucceedState.prototype.validate = function (cell, res) {\n    if (!res)\n        res = [];\n    if (cell.edges &&\n        (cell.edges.filter(function (v) { return (v.source == cell) && _utils__WEBPACK_IMPORTED_MODULE_0__[\"isAWSsf\"](v); }).length > 0)) {\n        res.push(\"A Succeed state MUST have no outgoing edge\");\n    }\n    return _utils__WEBPACK_IMPORTED_MODULE_0__[\"validateCommonAttributes\"](cell, res, false);\n};\nSucceedState.prototype.expJSON = function (cell, cells) {\n    var data = {};\n    var label = cell.getAttribute(\"label\");\n    data[label] = {\n        Type: \"Succeed\"\n    };\n    if (cell.getAttribute(\"comment\"))\n        data[label].Comment = cell.getAttribute(\"comment\");\n    if (cell.getAttribute(\"input_path\"))\n        data[label].InputPath = _utils__WEBPACK_IMPORTED_MODULE_0__[\"adjustJsonPath\"](cell.getAttribute(\"input_path\"));\n    if (cell.getAttribute(\"output_path\"))\n        data[label].OutputPath = _utils__WEBPACK_IMPORTED_MODULE_0__[\"adjustJsonPath\"](cell.getAttribute(\"output_path\"));\n    return data;\n};\nObject(_helper__WEBPACK_IMPORTED_MODULE_1__[\"registCodec\"])(SucceedState);\nSucceedState.prototype.handler = _helper__WEBPACK_IMPORTED_MODULE_1__[\"awssfStateHandler\"];\n\n\n//# sourceURL=webpack:///./src/states/succeed.ts?");

/***/ }),

/***/ "./src/states/task.ts":
/*!****************************!*\
  !*** ./src/states/task.ts ***!
  \****************************/
/*! exports provided: TaskState */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TaskState\", function() { return TaskState; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"./src/utils.ts\");\n/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./helper */ \"./src/states/helper.ts\");\n\n\nconst TaskState = function () { };\nTaskState.prototype.type = 'Task';\nTaskState.prototype.create = function (label, json) {\n    if (!json)\n        json = {};\n    var style = 'shape=stencil(rZVNb4MwDIZ/DdcqkI2P48S6Y1Wph51TMCMqTVDC2m2/fiEBdUCyAavExa+xH78BjIdTWZIavAAxcgYPP3tBsBeQQ0EZ5EreC56BlEpWQWluCJEJryZMYhMSWUPWGO1CBCXHCkxGNoKf4ErzputAWQmCNm0Wbz30pO5pL5xmnDHVhHImB5kfedWMUKZq0YdphjaPBvPZxSaqFeEMDYiBerO508LLaow/D3NYihl66aF/YV4XYvx1mO3iQ0PBiIT8mazdUk8WWBLPhB2Ww/r3foWz5cc4gc13ZoPhVCmujw2nR5Kd3gR/Z7l1RJ0R7cfuem2tC2K0PojIJP3qpgw3kR+FcYSihzhIEuy7hnaMhtOCC/hl5oJWldlDroOvSbueJok+feYXuPmNLH5tbfvqSu1TV3XoLteWHYOp3X0/P4n/L0Oj8js70jWT56tV8/vSwjc=);whiteSpace=wrap;gradientColor=none;html=1;';\n    var cell = Object(_helper__WEBPACK_IMPORTED_MODULE_1__[\"createState\"])(this, label, style, json);\n    cell.setAttribute('resource', json.Resource || '');\n    cell.setAttribute('parameters', JSON.stringify(json.Parameters) || '');\n    cell.setAttribute('timeout_seconds', json.TimeoutSeconds || 60);\n    cell.setAttribute('heartbeat_seconds', json.HeartbeatSeconds || '');\n    cell.setAttribute('result_path', json.ResultPath || '');\n    return cell;\n};\nTaskState.prototype.createDefaultEdge = function (src) {\n    for (var i in src.edges) {\n        var edge = src.edges[i];\n        if ((edge.source == src) && _utils__WEBPACK_IMPORTED_MODULE_0__[\"isNext\"](edge))\n            return CatchEdge.prototype.create();\n    }\n    return NextEdge.prototype.create();\n};\nTaskState.prototype.validate = function (cell, res) {\n    if (!res)\n        res = [];\n    if (!cell.getAttribute(\"resource\") || !cell.getAttribute(\"resource\").match(/^arn:[^:]+:(states|lambda):[^:]*:[^:]*:[^:]+:.+/)) {\n        res.push(\"resource MUST be a URI that uniquely identifies the specific task to execute\");\n    }\n    if (_utils__WEBPACK_IMPORTED_MODULE_0__[\"validateJson\"](cell.getAttribute(\"parameters\")) == false) {\n        res.push(\"parameters MUST be valid JSON\");\n    }\n    if (_utils__WEBPACK_IMPORTED_MODULE_0__[\"validateNumber\"](cell.getAttribute(\"timeout_seconds\")) == false) {\n        res.push(\"timeout_seconds MUST be number\");\n    }\n    if (_utils__WEBPACK_IMPORTED_MODULE_0__[\"validateNumber\"](cell.getAttribute(\"heartbeat_seconds\")) == false) {\n        res.push(\"heartbeat_seconds MUST be number\");\n    }\n    else {\n        if (Number(cell.getAttribute(\"heartbeat_seconds\")) >= Number(cell.getAttribute(\"timeout_seconds\"))) {\n            res.push(\"heartbeat_seconds MUST be smaller than timeout_seconds\");\n        }\n    }\n    return _utils__WEBPACK_IMPORTED_MODULE_0__[\"validateCommonAttributes\"](cell, res, true);\n};\nTaskState.prototype.expJSON = function (cell, cells) {\n    var data = {};\n    var label = cell.getAttribute(\"label\");\n    data[label] = {\n        Type: \"Task\",\n        Resource: cell.getAttribute(\"resource\")\n    };\n    if (cell.getAttribute(\"parameters\"))\n        data[label].Parameters = JSON.parse(cell.getAttribute(\"parameters\"));\n    if (cell.getAttribute(\"comment\"))\n        data[label].Comment = cell.getAttribute(\"comment\");\n    if (cell.getAttribute(\"input_path\"))\n        data[label].InputPath = _utils__WEBPACK_IMPORTED_MODULE_0__[\"adjustJsonPath\"](cell.getAttribute(\"input_path\"));\n    if (cell.getAttribute(\"output_path\"))\n        data[label].OutputPath = _utils__WEBPACK_IMPORTED_MODULE_0__[\"adjustJsonPath\"](cell.getAttribute(\"output_path\"));\n    if (cell.getAttribute(\"result_path\"))\n        data[label].ResultPath = _utils__WEBPACK_IMPORTED_MODULE_0__[\"adjustJsonPath\"](cell.getAttribute(\"result_path\"));\n    if (cell.getAttribute(\"timeout_seconds\"))\n        data[label].TimeoutSeconds = Number(cell.getAttribute(\"timeout_seconds\"));\n    if (cell.getAttribute(\"heartbeat_seconds\"))\n        data[label].HeartbeatSeconds = Number(cell.getAttribute(\"heartbeat_seconds\"));\n    var existNextEdge = false;\n    if (cell.edges) {\n        var sortedEdges = cell.edges.sort(function (a, b) {\n            if (Number(a.getAttribute(\"weight\")) > Number(b.getAttribute(\"weight\")))\n                return -1;\n            if (Number(a.getAttribute(\"weight\")) < Number(b.getAttribute(\"weight\")))\n                return 1;\n            return 0;\n        });\n        for (var i in sortedEdges) {\n            var edge = sortedEdges[i];\n            if (edge.source != cell)\n                continue;\n            if (edge.awssf && edge.awssf.expJSON) {\n                if (_utils__WEBPACK_IMPORTED_MODULE_0__[\"isRetry\"](edge)) {\n                    if (!data[label][\"Retry\"])\n                        data[label][\"Retry\"] = [];\n                    data[label][\"Retry\"].push(edge.awssf.expJSON(edge, cells));\n                }\n                else if (_utils__WEBPACK_IMPORTED_MODULE_0__[\"isCatch\"](edge)) {\n                    if (!data[label][\"Catch\"])\n                        data[label][\"Catch\"] = [];\n                    data[label][\"Catch\"].push(edge.awssf.expJSON(edge, cells));\n                }\n                else if (_utils__WEBPACK_IMPORTED_MODULE_0__[\"isNext\"](edge)) {\n                    existNextEdge = true;\n                    Object.assign(data[label], edge.awssf.expJSON(edge, cells));\n                }\n            }\n        }\n    }\n    if (existNextEdge == false || data[label].Next == 'End') {\n        delete data[label]['Next'];\n        data[label][\"End\"] = true;\n    }\n    return data;\n};\nObject(_helper__WEBPACK_IMPORTED_MODULE_1__[\"registCodec\"])(TaskState);\nvar TaskStateHandler = function (state) {\n    this.custom = function () {\n        this.domNode.appendChild(NextEdge.prototype.createHandlerImage.apply(this, arguments));\n        this.domNode.appendChild(CatchEdge.prototype.createHandlerImage.apply(this, arguments));\n        this.domNode.appendChild(RetryEdge.prototype.createHandlerImage.apply(this, arguments));\n    };\n    _helper__WEBPACK_IMPORTED_MODULE_1__[\"awssfStateHandler\"].apply(this, arguments);\n};\nTaskState.prototype.handler = TaskStateHandler;\nmxUtils.extend(TaskStateHandler, _helper__WEBPACK_IMPORTED_MODULE_1__[\"awssfStateHandler\"]);\n\n\n//# sourceURL=webpack:///./src/states/task.ts?");

/***/ }),

/***/ "./src/states/wait.ts":
/*!****************************!*\
  !*** ./src/states/wait.ts ***!
  \****************************/
/*! exports provided: WaitState */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"WaitState\", function() { return WaitState; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"./src/utils.ts\");\n/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./helper */ \"./src/states/helper.ts\");\n\n\nconst WaitState = function () { };\nWaitState.prototype.type = 'Wait';\nWaitState.prototype.create = function (label, json) {\n    if (!json)\n        json = {};\n    var style = 'shape=mxgraph.flowchart.delay;whiteSpace=wrap;gradientColor=none;html=1;';\n    var cell = Object(_helper__WEBPACK_IMPORTED_MODULE_1__[\"createState\"])(this, label, style, json);\n    var found = false;\n    var options = WaitState.prototype.cst.DURATION_FORMAT;\n    for (var j in options) {\n        var key = _utils__WEBPACK_IMPORTED_MODULE_0__[\"camelToSnake\"](options[j]);\n        if (json[options[j]]) {\n            cell.setAttribute(key, json[options[j]]);\n            found = true;\n        }\n        else {\n            cell.value.removeAttribute(key);\n        }\n    }\n    if (!found)\n        cell.setAttribute('seconds', '');\n    return cell;\n};\nWaitState.prototype.createDefaultEdge = function (src) {\n    for (var i in src.edges) {\n        var edge = src.edges[i];\n        if ((edge.source == src) && _utils__WEBPACK_IMPORTED_MODULE_0__[\"isNext\"](edge))\n            return null;\n    }\n    return NextEdge.prototype.create();\n};\nWaitState.prototype.cst = {\n    DURATION_FORMAT: [\"Seconds\", \"SecondsPath\", \"Timestamp\", \"TimestampPath\"]\n};\nWaitState.prototype.validate = function (cell, res) {\n    if (!res)\n        res = [];\n    if (_utils__WEBPACK_IMPORTED_MODULE_0__[\"validateNumber\"](cell.getAttribute(\"seconds\")) == false) {\n        res.push(\"seconds MUST be number\");\n    }\n    if (_utils__WEBPACK_IMPORTED_MODULE_0__[\"validateTimestamp\"](cell.getAttribute(\"timestamp\")) == false) {\n        res.push(\"timestamp MUST be valid formated\");\n    }\n    if (_utils__WEBPACK_IMPORTED_MODULE_0__[\"validateJsonPath\"](cell.getAttribute(\"seconds_path\")) == false) {\n        res.push(\"second_path MUST use only supported jsonpath\");\n    }\n    if (_utils__WEBPACK_IMPORTED_MODULE_0__[\"validateJsonPath\"](cell.getAttribute(\"timestamp_path\")) == false) {\n        res.push(\"timestamp_path MUST use only supported jsonpath\");\n    }\n    if (!(cell.getAttribute(\"seconds\") || cell.getAttribute(\"timestamp\") || cell.getAttribute(\"seconds_path\") || cell.getAttribute(\"timestamp_path\"))) {\n        res.push('A Wait state MUST contain exactly one of ”Seconds”, “SecondsPath”, “Timestamp”, or “TimestampPath”');\n    }\n    return _utils__WEBPACK_IMPORTED_MODULE_0__[\"validateCommonAttributes\"](cell, res, false);\n};\nWaitState.prototype.expJSON = function (cell, cells) {\n    var data = {};\n    var label = cell.getAttribute(\"label\");\n    data[label] = {\n        Type: \"Wait\"\n    };\n    if (cell.getAttribute(\"comment\"))\n        data[label].Comment = cell.getAttribute(\"comment\");\n    if (cell.getAttribute(\"input_path\"))\n        data[label].InputPath = _utils__WEBPACK_IMPORTED_MODULE_0__[\"adjustJsonPath\"](cell.getAttribute(\"input_path\"));\n    if (cell.getAttribute(\"output_path\"))\n        data[label].OutputPath = _utils__WEBPACK_IMPORTED_MODULE_0__[\"adjustJsonPath\"](cell.getAttribute(\"output_path\"));\n    var options = this.cst.DURATION_FORMAT;\n    for (var j in options) {\n        var key = _utils__WEBPACK_IMPORTED_MODULE_0__[\"camelToSnake\"](options[j]);\n        if (cell.getAttribute(key)) {\n            if (cell.getAttribute(key).match(/^\\d+/)) {\n                data[label][options[j]] = Number(cell.getAttribute(key));\n            }\n            else {\n                data[label][options[j]] = cell.getAttribute(key);\n            }\n            break;\n        }\n    }\n    var existNextEdge = false;\n    for (var i in cell.edges) {\n        var edge = cell.edges[i];\n        if (edge.source != cell)\n            continue;\n        if (_utils__WEBPACK_IMPORTED_MODULE_0__[\"isNext\"](edge)) {\n            existNextEdge = true;\n            Object.assign(data[label], edge.awssf.expJSON(edge, cells));\n        }\n    }\n    if (existNextEdge == false || data[label].Next == 'End') {\n        delete data[label]['Next'];\n        data[label][\"End\"] = true;\n    }\n    return data;\n};\nWaitState.prototype.buildForm = function (form, attrName, attrValue) {\n    if (['label', 'comment', 'input_path', 'output_path'].indexOf(attrName) == -1) {\n        var tr = document.createElement('tr');\n        var td = document.createElement('td');\n        var select = document.createElement('select');\n        var options = this.cst.DURATION_FORMAT;\n        for (var j in options) {\n            var option = document.createElement('option');\n            mxUtils.writeln(option, options[j]);\n            option.setAttribute('value', _utils__WEBPACK_IMPORTED_MODULE_0__[\"camelToSnake\"](options[j]));\n            if (attrName == _utils__WEBPACK_IMPORTED_MODULE_0__[\"camelToSnake\"](options[j])) {\n                option.setAttribute('selected', 'true');\n            }\n            select.appendChild(option);\n        }\n        td.appendChild(select);\n        tr.appendChild(td);\n        td = document.createElement('td');\n        const input = document.createElement('textarea');\n        input.setAttribute('rows', '2');\n        input.style.width = '100%';\n        input.value = attrValue;\n        td.appendChild(input);\n        tr.appendChild(td);\n        form.body.appendChild(tr);\n        return [select, input];\n    }\n    else if (attrName != 'placeholders') {\n        const input = form.addTextarea(attrName + ':', attrValue, 2);\n        input.style.width = '100%';\n        return [attrName, input];\n    }\n    else {\n        return null;\n    }\n};\nWaitState.prototype.applyForm = function (value, name, text) {\n    var removeLabel = false;\n    if (text == null) {\n        value.removeAttribute(name);\n    }\n    else {\n        if (typeof (name) == 'object') {\n            for (var i in this.cst.DURATION_FORMAT) {\n                var n = _utils__WEBPACK_IMPORTED_MODULE_0__[\"camelToSnake\"](this.cst.DURATION_FORMAT[i]);\n                if (n == name.value) {\n                    value.setAttribute(name.value, text.value);\n                }\n                else {\n                    value.removeAttribute(n);\n                }\n            }\n        }\n        else {\n            value.setAttribute(name, text.value);\n        }\n        removeLabel = removeLabel || (name == 'placeholder' &&\n            value.getAttribute('placeholders') == '1');\n    }\n    return removeLabel;\n};\nObject(_helper__WEBPACK_IMPORTED_MODULE_1__[\"registCodec\"])(WaitState);\nvar WaitStateHandler = function (state) {\n    this.custom = function () {\n        this.domNode.appendChild(NextEdge.prototype.createHandlerImage.apply(this, arguments));\n    };\n    _helper__WEBPACK_IMPORTED_MODULE_1__[\"awssfStateHandler\"].apply(this, arguments);\n};\nWaitState.prototype.handler = WaitStateHandler;\nmxUtils.extend(WaitStateHandler, _helper__WEBPACK_IMPORTED_MODULE_1__[\"awssfStateHandler\"]);\n\n\n//# sourceURL=webpack:///./src/states/wait.ts?");

/***/ }),

/***/ "./src/utils.ts":
/*!**********************!*\
  !*** ./src/utils.ts ***!
  \**********************/
/*! exports provided: init, _is, isAWSsf, isAWSconfig, isStart, isEnd, isParallelChild, isParallel, isTask, isWait, isNext, isStartAt, isRetry, isCatch, isChoice, isDefault, createHandlerImage, validateTimestamp, validateNumber, validateJson, validateJsonPath, validateCommonAttributes, snakeToCamel, camelToSnake, parseJSEPObject, parseJSEPValue, parseJSEPExpr, ruleToJSEP, adjustJsonPath, inCarlo, isSupproted, setupRoot, getStepFunctionDefinition, setupAWSconfig, getCallerIdentity, getResourceList */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"init\", function() { return init; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"_is\", function() { return _is; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isAWSsf\", function() { return isAWSsf; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isAWSconfig\", function() { return isAWSconfig; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isStart\", function() { return isStart; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isEnd\", function() { return isEnd; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isParallelChild\", function() { return isParallelChild; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isParallel\", function() { return isParallel; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isTask\", function() { return isTask; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isWait\", function() { return isWait; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isNext\", function() { return isNext; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isStartAt\", function() { return isStartAt; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isRetry\", function() { return isRetry; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isCatch\", function() { return isCatch; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isChoice\", function() { return isChoice; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isDefault\", function() { return isDefault; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"createHandlerImage\", function() { return createHandlerImage; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"validateTimestamp\", function() { return validateTimestamp; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"validateNumber\", function() { return validateNumber; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"validateJson\", function() { return validateJson; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"validateJsonPath\", function() { return validateJsonPath; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"validateCommonAttributes\", function() { return validateCommonAttributes; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"snakeToCamel\", function() { return snakeToCamel; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"camelToSnake\", function() { return camelToSnake; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"parseJSEPObject\", function() { return parseJSEPObject; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"parseJSEPValue\", function() { return parseJSEPValue; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"parseJSEPExpr\", function() { return parseJSEPExpr; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ruleToJSEP\", function() { return ruleToJSEP; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"adjustJsonPath\", function() { return adjustJsonPath; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"inCarlo\", function() { return inCarlo; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isSupproted\", function() { return isSupproted; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setupRoot\", function() { return setupRoot; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getStepFunctionDefinition\", function() { return getStepFunctionDefinition; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setupAWSconfig\", function() { return setupAWSconfig; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getCallerIdentity\", function() { return getCallerIdentity; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getResourceList\", function() { return getResourceList; });\nlet ui;\nfunction init(editorUi) {\n    ui = editorUi;\n}\nfunction _is(cell, name) {\n    return (cell && cell.value && (cell.value.getAttribute(\"type\") == `awssf${name}`));\n}\nfunction isAWSsf(cell) {\n    return (cell && (cell.awssf != null)) && (cell.value && cell.value.getAttribute(\"type\") && cell.value.getAttribute(\"type\").indexOf(\"awssf\") == 0);\n}\nfunction isAWSconfig(cell) {\n    return _is(cell, 'AWSconfig');\n}\nfunction isStart(cell) {\n    return _is(cell, 'Start');\n}\nfunction isEnd(cell) {\n    return _is(cell, 'End');\n}\nfunction isParallelChild(cell) {\n    return (cell && cell.parent && cell.parent.awssf && _is(cell.parent, \"Parallel\"));\n}\nfunction isParallel(cell) {\n    return _is(cell, \"Parralel\");\n}\nfunction isTask(cell) {\n    return _is(cell, \"Task\");\n}\nfunction isWait(cell) {\n    return _is(cell, \"Wait\");\n}\nfunction isNext(cell) {\n    return _is(cell, \"Next\");\n}\nfunction isStartAt(cell) {\n    return _is(cell, \"StartAt\");\n}\nfunction isRetry(cell) {\n    return _is(cell, \"Retry\");\n}\nfunction isCatch(cell) {\n    return _is(cell, \"Catch\");\n}\nfunction isChoice(cell) {\n    return _is(cell, \"Choice\");\n}\nfunction isDefault(cell) {\n    return _is(cell, \"Default\");\n}\nfunction createHandlerImage(cls, src) {\n    var img = mxUtils.createImage(src);\n    img.setAttribute('title', cls.prototype.type);\n    img.style.cursor = 'pointer';\n    img.style.width = '16px';\n    img.style.height = '16px';\n    mxEvent.addGestureListeners(img, mxUtils.bind(this, function (evt) {\n        var pt = mxUtils.convertPoint(this.graph.container, mxEvent.getClientX(evt), mxEvent.getClientY(evt));\n        var edge = cls.prototype.create();\n        this.graph.connectionHandler.start(this.state, pt.x, pt.y, new mxCellState(this.graph.view, edge, this.graph.getCellStyle(edge)));\n        this.graph.isMouseDown = true;\n        this.graph.isMouseTrigger = mxEvent.isMouseEvent(evt);\n        mxEvent.consume(evt);\n    }));\n    return img;\n}\nfunction validateTimestamp(val) {\n    if (!val)\n        return null;\n    return !!(val.match(/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(Z|[+-]\\d{2}:\\d{2})$/));\n}\nfunction validateNumber(val) {\n    if (!val)\n        return null;\n    return !!(val.match(/^\\d+$/));\n}\nfunction validateJson(val) {\n    if (!val)\n        return null;\n    try {\n        JSON.parse(val);\n        return true;\n    }\n    catch (error) {\n        return false;\n    }\n}\nfunction validateJsonPath(val) {\n    if (!val)\n        return null;\n    return !!(val.match(/^\\$/) && !val.match(/([@,:?[\\]]|\\.\\.)/)) || (val == \"null\");\n}\nfunction validateCommonAttributes(cell, res, checkResultPath) {\n    if (!res)\n        res = [];\n    if (validateJsonPath(cell.getAttribute(\"input_path\")) == false) {\n        res.push(\"input_path MUST use only supported jsonpath\");\n    }\n    if (validateJsonPath(cell.getAttribute(\"output_path\")) == false) {\n        res.push(\"output_path MUST use only supported jsonpath\");\n    }\n    if (checkResultPath && (validateJsonPath(cell.getAttribute(\"result_path\")) == false)) {\n        res.push(\"result_path MUST use only supported jsonpath or null\");\n    }\n    return res;\n}\nfunction snakeToCamel(p) {\n    p = p.charAt(0).toLowerCase() + p.slice(1);\n    return p.replace(/_./g, function (s) { return s.charAt(1).toUpperCase(); });\n}\nfunction camelToSnake(p) {\n    p = snakeToCamel(p);\n    return p.replace(/([A-Z])/g, function (s) { return '_' + s.charAt(0).toLowerCase(); });\n}\n// const ops = {\n//   \"==\": \"Equals\",\n//   \"<\": \"LessThan\",\n//   \">\": \"GreaterThan\",\n//   \"<=\": \"LessThanEquals\",\n//   \">=\": \"GreaterThanEquals\"\n// };\nvar ops;\n(function (ops) {\n    ops[\"==\"] = \"Equals\";\n    ops[\"<\"] = \"LessThan\";\n    ops[\">\"] = \"GreaterThan\";\n    ops[\"<=\"] = \"LessThanEquals\";\n    ops[\">=\"] = \"GreaterThanEquals\";\n})(ops || (ops = {}));\nfunction parseJSEPObject(obj, res) {\n    if (res == null)\n        res = [];\n    if (obj.type == 'MemberExpression') {\n        if (obj.computed) {\n            res.unshift('[' + parseJSEPObject(obj.property) + ']');\n        }\n        else {\n            res.unshift(parseJSEPObject(obj.property));\n        }\n        return parseJSEPObject(obj.object, res);\n    }\n    else if (obj.type == 'Identifier') {\n        res.unshift(obj.name);\n        return res.reduce((prev, cur) => {\n            if (cur[0] == '[') {\n                return prev + cur;\n            }\n            else {\n                return prev + \".\" + cur;\n            }\n        });\n    }\n    else if (obj.type == 'Literal') {\n        return obj.value;\n    }\n}\nfunction parseJSEPValue(obj) {\n    return obj.value;\n}\nfunction parseJSEPExpr(obj, res) {\n    if (res == null)\n        res = {};\n    if (obj.operator == '&&') {\n        Object.assign(res, { And: [parseJSEPExpr(obj.left), parseJSEPExpr(obj.right)] });\n    }\n    else if (obj.operator == '||') {\n        Object.assign(res, { Or: [parseJSEPExpr(obj.left), parseJSEPExpr(obj.right)] });\n    }\n    else if (obj.operator == '!') {\n        Object.assign(res, { Not: parseJSEPExpr(obj.argument) });\n    }\n    else if (ops[obj.operator]) {\n        var vartype;\n        var varname = parseJSEPObject(obj.left);\n        var val = parseJSEPValue(obj.right);\n        if (typeof (val) == \"number\") {\n            vartype = \"Numeric\";\n        }\n        else if (typeof (val) == \"string\") {\n            if (val.match(/^[\"'][\\d-]+T[\\d:]+Z[\"']$/)) {\n                vartype = \"Timestamp\";\n            }\n            else {\n                vartype = \"String\";\n            }\n        }\n        else if (typeof (val) == \"boolean\") {\n            vartype = \"Boolean\";\n        }\n        var tmp = {\n            Variable: varname\n        };\n        tmp[vartype + ops[obj.operator]] = val;\n        Object.assign(res, tmp);\n    }\n    return res;\n}\nfunction ruleToJSEP(choice) {\n    var variable = choice.Variable;\n    var ops = {\n        And: \"&&\",\n        Or: \"||\",\n        Equals: \"==\",\n        GreaterThan: \">\",\n        GreaterThanEquals: \">=\",\n        LessThan: \"<\",\n        LessThanEquals: \"<=\"\n    };\n    for (var key in choice) {\n        var value = choice[key];\n        if (key.match(/^(And|Or)$/)) {\n            return value.map(ch => \"(\" + ruleToJSEP(ch) + \")\").join(\" \" + ops[key] + \" \");\n        }\n        else if (key.match(/^(Not)$/)) {\n            return \"!(\" + ruleToJSEP(value) + \")\";\n        }\n        else {\n            const m = key.match(/^(Boolean|Numeric|String|Timestamp)(Equals|GreaterThan|GreaterThanEquals|LessThan|LessThanEquals)$/);\n            if (m) {\n                if (m[1].match(/(String|Timestamp)/i)) {\n                    return [variable, ops[m[2]], '\"' + value + '\"'].join(\" \");\n                }\n                else {\n                    return [variable, ops[m[2]], value].join(\" \");\n                }\n            }\n        }\n    }\n}\nfunction adjustJsonPath(val) {\n    return (val === \"null\") ? null : val;\n}\nfunction inCarlo() {\n    return (typeof __updateAWSconfig !== \"undefined\") &&\n        (typeof __describeStateMachine !== \"undefined\") &&\n        (typeof __listStateMachines !== \"undefined\") &&\n        (typeof __deployStateMachine !== \"undefined\");\n}\nfunction isSupproted() {\n    return inCarlo();\n}\nfunction setupRoot() {\n    if (!ui.editor.graph.getModel().cells)\n        return;\n    var cell = ui.editor.graph.getModel().getRoot();\n    if (cell && (cell.value == null)) {\n        cell.value = mxUtils.createXmlDocument().createElement('object');\n        if (cell.getAttribute(\"type\") == null)\n            cell.setAttribute(\"type\", \"awssfRoot\");\n        if (cell.getAttribute(\"name\") == null)\n            cell.setAttribute(\"name\", \"\");\n        if (cell.getAttribute(\"comment\") == null)\n            cell.setAttribute(\"comment\", \"\");\n        if (cell.getAttribute(\"timeout_seconds\") == null)\n            cell.setAttribute(\"timeout_seconds\", \"\");\n        if (cell.getAttribute(\"version\") == null)\n            cell.setAttribute(\"version\", \"\");\n        if (cell.getAttribute(\"role_arn\") == null)\n            cell.setAttribute(\"role_arn\", \"\");\n        if (cell.getAttribute(\"state_machine_arn\") == null)\n            cell.setAttribute(\"state_machine_arn\", \"\");\n        cell.awssf = {};\n    }\n    return;\n}\nfunction getStepFunctionDefinition() {\n    var states = {};\n    var model = ui.editor.graph.getModel();\n    var startat = null;\n    for (var i in model.cells) {\n        var cell = model.cells[i];\n        if (!isAWSsf(cell))\n            continue;\n        if (isAWSconfig(cell))\n            continue;\n        if (isParallelChild(cell))\n            continue;\n        if (isStartAt(cell)) {\n            startat = model.cells[cell.target.id].getAttribute(\"label\");\n        }\n        if (isStart(cell) || isEnd(cell))\n            continue;\n        if (cell.isVertex()) {\n            Object.assign(states, cell.awssf.expJSON(cell, model.cells));\n        }\n    }\n    var root = model.getRoot();\n    var data = {};\n    if (root.getAttribute(\"comment\"))\n        data.Comment = root.getAttribute(\"comment\");\n    if (startat)\n        data.StartAt = startat;\n    data.States = states;\n    if (root.getAttribute(\"timeout_seconds\"))\n        data.TimeoutSeconds = Number(root.getAttribute(\"timeout_seconds\"));\n    if (root.getAttribute(\"version\"))\n        data.Version = root.getAttribute(\"version\");\n    return data;\n}\nfunction setupAWSconfig() {\n    var codec = new mxCodec();\n    var model = ui.editor.graph.getModel();\n    var node = codec.encode(model);\n    var found = mxUtils.findNode(node, \"type\", \"awssfAWSconfig\");\n    if (found == null) {\n        //mxUtils.alert(\"You need to put a AWSconfig.\")\n        return false;\n    }\n    var awsconfig = codec.decode(found);\n    var params = { accessKeyId: awsconfig.getAttribute('accessKeyId'), secretAccessKey: awsconfig.getAttribute('secretAccessKey'), region: awsconfig.getAttribute('region') };\n    AWS.config.update(params);\n    if (typeof __updateAWSconfig !== \"undefined\") {\n        __updateAWSconfig(params);\n    }\n    return true;\n}\nfunction getCallerIdentity(callback) {\n    var sts = new AWS.STS({ apiVersion: '2011-06-15' });\n    sts.getCallerIdentity({}, function (err, data) {\n        if (err)\n            console.log(err, err.stack); // an error occurred\n        else\n            callback(data);\n    });\n}\nfunction getResourceList(callback) {\n    if (!setupAWSconfig())\n        return;\n    var funclist = [];\n    // var stepfunctions = new AWS.StepFunctions({apiVersion: '2016-11-23'});\n    // stepfunctions.listActivities({}, function(err, data){\n    //   if (err) console.log(err, err.stack); // an error occurred\n    //   else{\n    //     for(var i in data.activities){\n    //       var act = data.activities[i];\n    //       funclist.push(func.activityArn);\n    //     }\n    //   };\n    var lambda = new AWS.Lambda({ apiVersion: '2015-03-31' });\n    lambda.listFunctions({}, function (err, data) {\n        if (err)\n            console.log(err, err.stack); // an error occurred\n        else {\n            for (var i in data.Functions) {\n                var func = data.Functions[i];\n                funclist.push(func.FunctionArn);\n            }\n            callback(funclist);\n        }\n    });\n    // });\n}\n\n\n//# sourceURL=webpack:///./src/utils.ts?");

/***/ })

/******/ });